var esriHeader=function(){"use strict";function e(t,n,a){for(var r in n)"function"==typeof n[r]?t.addEventListener(a+r,n[r]):Object(n[r])===n[r]?e(t,n[r],a+r+"-"):t.setAttribute(a+r,n[r])}function t(t){var n=t instanceof Node?t:document.createElement(t);return[].slice.call(arguments,1).forEach(function(t){t instanceof Node?n.appendChild(t):"string"==typeof t?n.appendChild(document.createTextNode(t)):e(n,t,"")}),n}function n(e){for(;e.lastChild;)e.removeChild(e.lastChild);return e.appendChild(a(arguments)),e}function a(e){var t=document.createDocumentFragment();return[].slice.call(e,1).forEach(function(e){e instanceof Node?t.appendChild(e):t.appendChild(document.createTextNode(e))}),t}function r(e,t){var n=new XMLHttpRequest;return n.addEventListener("readystatechange",function(){4===n.readyState&&200===n.status&&t(n.responseText)}),n.open("GET",e),n.send(),n}function o(e,t,n){var a=document.createEvent("CustomEvent");a.initCustomEvent(t,!0,!0,n),e.dispatchEvent(a)}function i(e){var t=void 0,n=[];e.addEventListener("blur",function(){n.forEach(function(e){e.removeAttribute("js-focus"),e.removeAttribute("js-focus-ring")})},!0),e.addEventListener("focus",function(){var e=document.activeElement;e instanceof Element&&(e.setAttribute("js-focus",""),t&&e.setAttribute("js-focus-ring",""),n.push(e))},!0),e.addEventListener("keydown",function(){t=clearTimeout(t)||setTimeout(function(){t=0},100)},!0)}function c(e,t){r(e,function(e){t(b(JSON.parse(e)))})}var d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},l="esri-header-account",s=function(){var e=t("div",{class:l}),a=document.createTextNode(""),r=t("button",{class:l+"-control "+l+"-control--signin"},a);r.addEventListener("click",function(e){o(r,"header:click:signin",{event:e})});var i=t("img",{class:l+"-image"}),c=document.createTextNode(""),s=t("span",{class:l+"-name"},c),u=document.createTextNode(""),m=t("span",{class:l+"-id"},u),h=t("button",{class:l+"-control "+l+"-control--signedin",id:l+"-control",aria:{controls:l+"-menu",expanded:!1,haspopup:!0}},i,s,m);h.addEventListener("click",function(t){o(h,"header:click:account",{event:t}),o(h,"header:menu:toggle",{account:!0,control:h,content:A,state:"menu",target:e,type:"account-toggle"})});var p=document.createTextNode(""),v=t("button",{class:l+"-content-toggle"},p);v.addEventListener("click",function(){o(v,"header:menu:close",{control:h,content:A,type:"account-close"})});var f=t("img",{class:l+"-content-image",role:"presentation"}),g=document.createTextNode(""),b=document.createTextNode(""),x=document.createTextNode(""),E=t("div",{class:l+"-content-info"},f,t("span",{class:l+"-content-name"},g),t("span",{class:l+"-content-id"},b),t("span",{class:l+"-content-group"},x)),w=t("ul",{class:l+"-content-menu",role:"navigation",aria:{labelledby:l+"-control"}}),y=document.createTextNode(""),L=t("button",{class:l+"-signin-control -switch"},y);L.addEventListener("click",function(e){o(L,"header:click:switch",{event:e})});var k=document.createTextNode(""),N=t("button",{class:l+"-signin-control -logout"},k);N.addEventListener("click",function(e){o(N,"header:click:signout",{event:e})});var C=t("ul",{class:l+"-signin-menu",role:"group"},t("li",{class:l+"-signin-item"},L),t("li",{class:l+"-signin-item"},N)),A=t("div",{class:l+"-menu",id:l+"-menu",role:"group",aria:{expanded:!1,hidden:!0}},v,E,w,C);return e.addEventListener("header:update:account",function(o){var s=o.detail;t(h,{aria:{label:s.label}}),p.nodeValue=s.label,a.nodeValue=s.controls.signin,y.nodeValue=s.controls.switch,k.nodeValue=s.controls.signout,s.user?(c.nodeValue=g.nodeValue=s.user.name,u.nodeValue=b.nodeValue=s.user.id,i.src=f.src=s.user.image,x.nodeValue=s.user.group,n.apply(void 0,[w].concat(d(s.menus.map(function(e){return t("li",{class:l+"-content-item"},t("a",{class:l+"-content-link",href:e.href},e.label))})))),n(e,h,A)):n(e,r)}),e},u="esri-header-brand",m=function(){var e=t(document.createElementNS("http://www.w3.org/2000/svg","svg"),{class:u+"-image"}),a=t("a",{class:u,id:u},e);return a.addEventListener("click",function(e){o(a,"header:click:brand",{event:e})}),a.addEventListener("header:update:brand",function(r){var o=r.detail;t(a,{href:o.href,aria:{label:o.label}}),t(e,{viewBox:"0 0 "+o.width+" "+o.height,width:""+o.width,height:""+o.height}),n.apply(void 0,[e].concat(d(o.image.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})}))))}),a},h="esri-header-menus",p=function(){var e=t("button",{class:h+"-toggle",id:h+"-toggle",aria:{controls:h+"-content",expanded:!1,haspopup:!0,labelledby:"esri-header-brand"}});e.addEventListener("click",function(t){o(e,"header:menu:toggle",{control:e,content:a,root:!0,state:"menu",target:r,type:"root-toggle",event:t})});var a=t("div",{class:h+"-content",aria:{hidden:!0,expanded:!1}}),r=t("div",{class:h,id:h},e,a);return r.addEventListener("header:update:menus",function(e){var r=e.detail;n.apply(void 0,[a].concat(d(r.map(function(e,n){return t("div",{class:h+"-menu",role:"group"},t.apply(void 0,["ul",{class:h+"-list",role:"navigation",aria:{labelledby:"esri-header-brand"}}].concat(d(e.map(function(e,a){var r=t("a",{class:h+"-link",id:h+"-link-"+n+"-"+a,href:e.href||"javascript:;"},e.label);e.data&&r({data:e.data});var i=t("li",{class:h+"-item"},r),c=e.menus&&e.menus.length,l=e.tiles&&e.tiles.length;if(c||l){var s=t("button",{class:h+"-submenu-toggle"},e.label),u=t("div",{class:h+"-submenu",id:h+"-submenu-"+n+"-"+a,role:"group",aria:{hidden:!0,expanded:!1},data:{filled:e.menus.length>10?e.menus.slice(0,18).length:""}},s);c&&t(u,t.apply(void 0,["ul",{class:h+"-sublist",role:"navigation",aria:{labelledby:h+"-link-"+n+"-"+a}}].concat(d(e.menus.slice(0,18).map(function(e){var n=t("a",{class:h+"-sublink",href:e.href},e.label);return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:h+"-subitem"},n)}))))),l&&t(u,t.apply(void 0,["ul",{class:h+"-sublist--featured",role:"navigation",aria:{labelledby:h+"-link-"+n+"-"+a},data:{filled:""+e.tiles.slice(0,4).length}}].concat(d(e.tiles.slice(0,4).map(function(e){var n=t("a",{class:h+"-sublink--featured",href:e.href},t(document.createElementNS("http://www.w3.org/2000/svg","svg"),e.width&&e.height?{viewBox:"0 0 "+e.width+" "+e.height}:{},{class:h+"-sublink-image"},t.apply(void 0,[document.createDocumentFragment()].concat(d(e.icon.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})}))))),t("span",{class:h+"-sublink-text"},e.label));return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:h+"-subitem--featured"},n)}))))),t(i,u),r.addEventListener("click",function(){o(r,"header:menu:toggle",{control:r,content:u,submenu:!0,state:"menu",type:"menu-toggle"})}),s.addEventListener("click",function(){o(s,"header:menu:close",{control:r,submenu:!0,content:u,type:"menu-close"})})}return i})))))}))))}),r},v=function(e){function n(n){n&&"reset"===n.type&&(i.value="");var a=i.value;a!==h&&(h=a,o(u,e.prefix+":input",{value:h,event:n})),m&&!a?(m=!1,r.removeAttribute("data-filled"),s.removeAttribute("data-filled")):!m&&a&&(m=!0,t(r,{data:{filled:""}}),t(s,{data:{filled:""}})),c.nodeValue=a;var p=d.scrollWidth+"px";l.style.width=p}function a(t){o(u,e.prefix+":submit",{value:i.value,event:t})}var r=t("label",{class:e.prefix+"-label",for:e.prefix+"-query-control"},e.queryLabel),i=t("input",{class:e.prefix+"-control",id:e.prefix+"-control",type:"search",name:"q",autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:"false"}),c=document.createTextNode(""),d=t("div",{class:e.prefix+"-measure-text",aria:{hidden:!0}},c),l=t("div",{class:e.prefix+"-measure"},d),s=t("button",{class:e.prefix+"-submit",type:"submit",aria:{label:e.submitLabel}}),u=t("form",{class:e.prefix+"-form",action:e.action,role:"search",aria:{label:e.label}},r,i,l,s);u.addEventListener(e.prefix+":focus",function(){i.focus()});var m=!1,h="";return u.addEventListener("DOMNodeInserted",function t(){u.parentNode&&(u.removeEventListener("DOMNodeInserted",t),o(u,e.prefix+":update",e))}),u.addEventListener(e.prefix+":update",function(){u.ownerDocument.defaultView.matchMedia(e.matchMedia||"(max-width: 720px)").addListener(n),i.addEventListener("input",n),u.addEventListener("reset",n),u.addEventListener("submit",a),u.addEventListener(e.prefix+":unload",onunload)}),u},f="esri-header-search",g=function(){var e=t(document.createElementNS("http://www.w3.org/2000/svg","svg"),{class:f+"-image",id:f+"-image"}),a=t("button",{class:f+"-control",id:f+"-control",aria:{expanded:!1,controls:f+"-content"}},e);a.addEventListener("click",function(e){o(a,"header:click:search",{event:e}),o(a,"header:menu:toggle",{control:a,content:r,state:"search",target:i,type:"search-toggle",event:e})});var r=t("div",{class:f+"-content",id:f+"-content",aria:{expanded:!1,labelledby:f+"-control"}}),i=t("div",{class:f},a,r);return i.addEventListener("header:update:search",function(i){var c=i.detail;if(t(a,{aria:{label:c.label}}),"string"==typeof c.image?(e.removeAttribute("viewBox"),n(e,t("use",{href:c.image}))):n.apply(void 0,[e].concat(d(c.image.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})})))),c.dialog){c.dialog.prefix="esri-header-search-dialog";var l=v(c.dialog),s=t("button",{class:"esri-header-search-dialog-cancel",type:"reset"},t("span",c.dialog.cancelLabel));s.addEventListener("click",function(e){o(a,"header:menu:close",{control:a,content:r,state:"search",type:"search-close",event:e})}),t(l,s),n(r,l),a.addEventListener("click",function(e){"true"===a.getAttribute("aria-expanded")&&o(l,c.dialog.prefix+":focus",{event:e})})}}),i},b=function(e){var a=void 0,r=void 0,c=t("button",{class:"esri-header-canvas",tabindex:"-1",data:{open:!1}});c.addEventListener("click",function(){o(c,"header:menu:close")});var d=m(),l=s(),u=p(),h=g(),v=t("div",{class:"esri-header-client"},l),f=t("div",{class:"esri-header -"+(e.theme||"web")},c,d,u,h,v);i(f),f.addEventListener("header:update",function(e){var t=e.detail;t.brand&&o(d,"header:update:brand",t.brand),t.menus&&o(u,"header:update:menus",t.menus),t.search&&o(h,"header:update:search",t.search),t.account&&o(v.lastChild,"header:update:account",t.account),f.ownerDocument.defaultView.addEventListener("keydown",function(e){27===e.keyCode&&o(f,"header:menu:close")})}),f.addEventListener("header:menu:toggle",function(e){var t=e.detail,n="true"!==t.control.getAttribute("aria-expanded")?"header:menu:open":"header:menu:close";o(t.control,n,t)});var b=null,x=null,E=null,w=null;return f.addEventListener("header:menu:open",function(e){var n=e.detail,r="menu-toggle"===n.type;t(n.control,{aria:{expanded:!0}}),t(n.content,{aria:{expanded:!0,hidden:!1}}),w&&w.control!==n.control&&o(w.control,"header:menu:close",w),"menu-toggle"===n.type&&(w=n),h===n.target?x=n:x&&(o(h,"header:menu:close",x),x=null),u===n.target?E=n:!E||r||a.matches||(o(u,"header:menu:close",E),E=null),l===n.target?b=n:b&&(o(l,"header:menu:close",b),b=null),t(c,{data:{open:!0,state:n.state}}),t(f.ownerDocument.documentElement,{data:{"header-is-open":!0}})}),f.addEventListener("header:menu:close",function(e){var n=e.detail||E||x||b||w;if(n){t(n.control,{aria:{expanded:!1}}),t(n.content,{aria:{expanded:!1,hidden:!0}});var a=!r.matches||"menu-close"!==n.type&&"account-close"!==n.type;x&&x.control===n.control&&o(x.content.lastChild,"reset"),a&&(t(c,{data:{open:!1}}),f.ownerDocument.documentElement.removeAttribute("data-header-is-open"))}}),f.addEventListener("DOMNodeInserted",function i(){function c(){var e=m.documentElement.clientWidth,t=m.documentElement.clientHeight,a=m.documentElement.scrollHeight;g=getComputedStyle(m.documentElement).overflowY.replace("visible",function(){return a>t?"scroll":"visible"}),n(p,":root{--esri-vw:"+e+"px;--esri-vh:"+t+"px}[data-header-is-open]{width:"+e+"px;height:"+t+"px;overflow-y:"+g+"}")}function d(){a.matches?(o(f,"header:breakpoint:s"),u.lastChild.appendChild(l)):(o(f,"header:breakpoint:not:s"),v.appendChild(l))}function s(){r.matches?(o(f,"header:breakpoint:sm"),t(u.lastChild,{aria:{hidden:"false"===u.lastChild.getAttribute("aria-expanded")}})):(o(f,"header:breakpoint:not:sm"),t(u.lastChild,{aria:{hidden:!1}}))}var m=f.ownerDocument,h=m.defaultView,p=t("style"),g=void 0;f.parentNode&&(f.removeEventListener("DOMNodeInserted",i),o(f,"header:update",e),t(m.head,p),h.addEventListener("orientationchange",c),h.addEventListener("resize",c),c(),a=h.matchMedia("(max-width: 767px)"),r=h.matchMedia("(max-width: 1023px)"),a.addListener(d),r.addListener(s),d(),s())}),f};return{create:b,createFromURL:c,createFromDefault:function(e){c("/esri-header.json",e)}}}();
//# sourceMappingURL=esri-header.js.map
