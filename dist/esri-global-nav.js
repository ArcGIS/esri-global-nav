!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.esriGlobalNav=t()}(this,function(){"use strict";function e(t,n,a){for(var r in n)"function"==typeof n[r]?t.addEventListener(a+r,n[r]):Object(n[r])===n[r]?e(t,n[r],a+r+"-"):t.setAttribute(a+r,n[r])}function t(t){var n=t instanceof Node?t:document.createElement(t);return[].slice.call(arguments,1).forEach(function(t){t instanceof Node?n.appendChild(t):"string"==typeof t?n.innerHTML=t:e(n,t,"")}),n}function n(e){for(;e.lastChild;)e.removeChild(e.lastChild);return e.appendChild(function(e){var t=document.createDocumentFragment();return[].slice.call(e,1).forEach(function(e){e instanceof Node?t.appendChild(e):t.appendChild(document.createTextNode(e))}),t}(arguments)),e}function a(e,t,n){var a=document.createEvent("CustomEvent");a.initCustomEvent(t,!0,!0,n),e.dispatchEvent(a)}function r(e){var t=void 0,n=[];e.addEventListener("blur",function(){n.forEach(function(e){e.removeAttribute("js-focus"),e.removeAttribute("js-focus-ring")})},!0),e.addEventListener("focus",function(){var e=document.activeElement;e instanceof Element&&(e.setAttribute("js-focus",""),t&&e.setAttribute("js-focus-ring",""),n.push(e))},!0),e.addEventListener("keydown",function(){t=clearTimeout(t)||setTimeout(function(){t=0},100)},!0)}function i(e){function n(e){var n=e.$imgWrapper,a=e.id,r=e.imgDef,i=e.imgClass,o=e.imgWidth,s=e.imgHeight;n.appendChild(t("img",{id:a,src:r,class:i,style:(o?"width:"+o+"px":"")+"; "+(s?"height:"+s+"px":"")}))}var a=e.imgDef,r=void 0===a?"":a,i=e.imgClass,o=void 0===i?"":i,s=e.imgWidth,l=e.imgHeight,c=e.viewBox,u=e.id,p=e.$targetElm,h=t("span"),f={class:o,role:"presentation"};if(s&&l&&(f.width=s,f.height=l),c&&(f.viewBox=c),u&&(f.id=u),"string"==typeof r)r.indexOf(".svg")===r.length-4?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=new XMLHttpRequest;a.addEventListener("readystatechange",function(){4===a.readyState&&(200===a.status?t(a.responseText):n())}),a.open("GET",e),a.send()}(r,function(e){h.innerHTML=e;t(h.firstElementChild,f)},function(){n({$imgWrapper:h,id:u,imgDef:r,imgClass:o,imgWidth:s,imgHeight:l})}):n({$imgWrapper:h,id:u,imgDef:r,imgClass:o,imgWidth:s,imgHeight:l});else{var m=t(document.createElementNS("http://www.w3.org/2000/svg","svg"),f,t.apply(void 0,[document.createDocumentFragment()].concat(d(r.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})})))));h.appendChild(m)}return p&&(p.innerHTML="",p.appendChild(h)),h}function o(e){var t=e.targetElm,n=e.menuData;document.querySelector(t).classList.add("esri-header-barrier");var a=E(n.header);document.querySelector(t).appendChild(a)}function s(e){var t=e.targetElm,n=e.menuData;document.querySelector(t).classList.add("esri-footer-barrier");var a=L(n.footer);document.querySelector(t).appendChild(a)}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=(function(){function e(e){this.value=e}function t(t){function n(r,i){try{var o=t[r](i),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):a(o.done?"return":"normal",o.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(e,t){return new Promise(function(a,o){var s={key:e,arg:t,resolve:a,reject:o,next:null};i?i=i.next=s:(r=i=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}),c="esri-header-account",u="esri-header-brand",p="esri-header-branding-stripe",h="esri-header-menus",f=function(e){var r=e.variant,o=void 0===r?"desktop":r,s=t("div",{class:h,id:h+"-"+o});if(s.classList.add("-"+o),"mobile"===o){var l=t("button",{class:h+"-toggle",id:h+"-"+o+"-toggle",aria:{controls:h+"-content",expanded:!1,haspopup:!0,labelledby:"esri-header-brand"}});l.addEventListener("click",function(e){a(l,"header:menu:toggle",{control:l,content:c,root:!0,state:"menu",target:s,type:"root-toggle",event:e})}),t(s,l)}var c=t("div",{class:h+"-content",aria:{hidden:!0,expanded:!1}});return t(s,c),s.addEventListener("header:update:menus",function(e){var r=e.detail;n.apply(void 0,[c].concat(d(r.map(function(e,n){return t("div",{class:h+"-menu",role:"group"},t.apply(void 0,["ul",{class:h+"-list",role:"navigation",aria:{labelledby:"esri-header-brand"}}].concat(d(e.map(function(e,r){var s=e.icon?i({imgDef:e.icon.path,imgClass:h+"-link-icon",imgWidth:e.icon.width||"16px",imgHeight:e.icon.height||"16px"}):null,l=t("a",{class:h+"-link "+(e.hideLabelInDesktop?"-hide-label":""),id:h+"-link-"+n+"-"+r,href:e.href||"javascript:;"},s,t("span",{class:h+"-link-label"},e.label));e.data&&l({data:e.data});var c=t("li",{class:h+"-item"},l),u=e.menus&&e.menus.length,p=e.tiles&&e.tiles.length;if(u||p){var f=t("button",{class:h+"-submenu-toggle"},e.label),m=t("div",{class:h+"-submenu",id:h+"-"+o+"-submenu-"+n+"-"+r,role:"group",aria:{hidden:!0,expanded:!1},data:{filled:e.menus&&e.menus.length>10?e.menus.slice(0,18).length:""}},f);u&&t(m,t.apply(void 0,["ul",{class:h+"-sublist",role:"navigation",aria:{labelledby:h+"-"+o+"-link-"+n+"-"+r}}].concat(d(e.menus.slice(0,18).map(function(e){var n=t("a",{class:h+"-sublink",href:e.href},e.label);return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:h+"-subitem"},n)}))))),p&&t(m,t.apply(void 0,["ul",{class:h+"-sublist--featured",role:"navigation",aria:{labelledby:h+"-link-"+n+"-"+r},data:{filled:""+e.tiles.slice(0,4).length}}].concat(d(e.tiles.slice(0,4).map(function(e){var n=t("a",{class:h+"-sublink--featured",href:e.href},i({imgDef:e.icon,imgClass:h+"-sublink-image",imgWidth:e.width,imgHeight:e.height}),t("span",{class:h+"-sublink-text"},e.label));return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:h+"-subitem--featured"},n)}))))),t(c,m),l.addEventListener("click",function(){a(l,"header:menu:toggle",{control:l,content:m,submenu:!0,state:"menu",type:"menu-toggle"})}),f.addEventListener("click",function(){a(f,"header:menu:close",{control:l,submenu:!0,content:m,type:"menu-close"})})}return c})))))}))))}),s.addEventListener("header:update:collapseMenus",function(e){var t=e.detail;if(t&&t.indexOf(!0)>-1){document.querySelector(".esri-header-menus-toggle").classList.add("-visible"),document.getElementById("esri-header-brand").classList.add("-fit-burger"),document.getElementById("esri-header-menus-mobile").classList.add("-always-visible");var n=[].slice.call(s.querySelectorAll(".esri-header-menus-menu"));t.forEach(function(e,t){e&&n[t].classList.add("-collapsed")})}}),s},m="esri-header-search",g=function(){var e=t("button",{class:m+"-control",id:m+"-control",aria:{expanded:!1,controls:m+"-content"}});e.addEventListener("click",function(t){a(e,"header:click:search",{event:t}),a(e,"header:menu:toggle",{control:e,content:r,state:"search",target:o,type:"search-toggle",event:t})});var r=t("div",{class:m+"-content",id:m+"-content",aria:{expanded:!1,labelledby:m+"-control"}}),o=t("div",{class:m},e,r);return o.addEventListener("header:update:search",function(o){var s=o.detail;if(!s.hide&&(t(e,{aria:{label:s.label}}),i({imgDef:s.image,imgClass:m+"-image",id:m+"-image",$targetElm:e}),s.dialog)){s.dialog.prefix="esri-header-search-dialog";var l=function(e){function n(n){n&&"reset"===n.type&&(o.value="");var r=o.value;r!==h&&(h=r,a(u,e.prefix+":input",{value:h,event:n})),p&&!r?(p=!1,i.removeAttribute("data-filled"),c.removeAttribute("data-filled")):!p&&r&&(p=!0,t(i,{data:{filled:""}}),t(c,{data:{filled:""}})),s.nodeValue=r;var f=l.scrollWidth+"px";d.style.width=f}function r(t){a(u,e.prefix+":submit",{value:o.value,event:t})}var i=t("label",{class:e.prefix+"-label",for:e.prefix+"-query-control"},e.queryLabel),o=t("input",{class:e.prefix+"-control",id:e.prefix+"-control",type:"search",name:"q",autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:"false"}),s=document.createTextNode(""),l=t("div",{class:e.prefix+"-measure-text",aria:{hidden:!0}},s),d=t("div",{class:e.prefix+"-measure"},l),c=t("button",{class:e.prefix+"-submit",type:"submit",aria:{label:e.submitLabel}}),u=t("form",{class:e.prefix+"-form",action:e.action,role:"search",aria:{label:e.label}},i,o,d,c);u.addEventListener(e.prefix+":focus",function(){o.focus()});var p=!1,h="";return u.addEventListener("DOMNodeInserted",function t(){u.parentNode&&(u.removeEventListener("DOMNodeInserted",t),a(u,e.prefix+":update",e))}),u.addEventListener(e.prefix+":update",function(){u.ownerDocument.defaultView.matchMedia(e.matchMedia||"(max-width: 720px)").addListener(n),o.addEventListener("input",n),u.addEventListener("reset",n),u.addEventListener("submit",r),u.addEventListener(e.prefix+":unload",onunload)}),u}(s.dialog),d=t("button",{class:"esri-header-search-dialog-cancel",type:"reset"},t("span",s.dialog.cancelLabel));d.addEventListener("click",function(t){a(e,"header:menu:close",{control:e,content:r,state:"search",type:"search-close",event:t})}),t(l,d),n(r,l),e.addEventListener("click",function(t){"true"===e.getAttribute("aria-expanded")&&a(l,s.dialog.prefix+":focus",{event:t})})}}),o},v=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(t){e.exports=t()}(function(){function e(t,n){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=n=g({},n),t[R]=this;var r={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==e.supportPointer};for(var i in r)!(i in n)&&(n[i]=r[i]);ie(n);for(var o in this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!n.forceFallback&&Z,a(t,"mousedown",this._onTapStart),a(t,"touchstart",this._onTapStart),n.supportPointer&&a(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(a(t,"dragover",this),a(t,"dragenter",this)),ae.push(this._onDragOver),n.store&&this.sort(n.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),C&&C.state!==t&&(o(C,"display",t?"none":""),t||C.state&&(e.options.group.revertClone?(L.insertBefore(C,D),e._animate(w,C)):L.insertBefore(C,w)),C.state=t)}function n(e,t,n){if(e){n=n||j;do{if(">*"===t&&e.parentNode===n||f(e,t))return e}while(e=function(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}(e))}return null}function a(e,t,n){e.addEventListener(t,n,Q)}function r(e,t,n){e.removeEventListener(t,n,Q)}function i(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(P," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(P," ")}}function o(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return j.defaultView&&j.defaultView.getComputedStyle?n=j.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function s(e,t,n){if(e){var a=e.getElementsByTagName(t),r=0,i=a.length;if(n)for(;r<i;r++)n(a[r],r);return a}return[]}function d(e,t,n,a,r,i,o,s){e=e||t[R];var l=j.createEvent("Event"),d=e.options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);l.initEvent(n,!0,!0),l.to=r||t,l.from=i||t,l.item=a||t,l.clone=C,l.oldIndex=o,l.newIndex=s,t.dispatchEvent(l),d[c]&&d[c].call(e,l)}function c(e,t,n,a,r,i,o,s){var l,d,c=e[R],u=c.options.onMove;return(l=j.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=n,l.draggedRect=a,l.related=r||t,l.relatedRect=i||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function u(e){e.draggable=!1}function p(){K=!1}function h(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!f(e,t)||n++;return n}function f(e,t){if(e){var n=(t=t.split(".")).shift().toUpperCase(),a=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(a)||[]).length!=t.length)}return!1}function m(e,t){var n,a;return function(){void 0===n&&(n=arguments,a=this,U(function(){1===n.length?e.call(a,n[0]):e.apply(a,n),n=void 0},t))}}function g(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function v(e){return G&&G.dom?G.dom(e).cloneNode(!0):z?z(e).clone(!0)[0]:e.cloneNode(!0)}function b(e){return U(e,0)}function y(e){return clearTimeout(e)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var w,E,x,C,L,D,k,A,_,T,S,N,M,I,B,H,O,W,Y,V,X={},P=/\s+/g,F=/left|right|inline/,R="Sortable"+(new Date).getTime(),q=window,j=q.document,$=q.parseInt,U=q.setTimeout,z=q.jQuery||q.Zepto,G=q.Polymer,Q=!1,Z="draggable"in j.createElement("div"),J=function(e){return!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&(e=j.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),K=!1,ee=Math.abs,te=Math.min,ne=[],ae=[],re=m(function(e,t,n){if(n&&t.scroll){var a,r,i,o,s,l,d=n[R],c=t.scrollSensitivity,u=t.scrollSpeed,p=e.clientX,h=e.clientY,f=window.innerWidth,m=window.innerHeight;if(_!==n&&(A=t.scroll,_=n,T=t.scrollFn,!0===A)){A=n;do{if(A.offsetWidth<A.scrollWidth||A.offsetHeight<A.scrollHeight)break}while(A=A.parentNode)}A&&(a=A,r=A.getBoundingClientRect(),i=(ee(r.right-p)<=c)-(ee(r.left-p)<=c),o=(ee(r.bottom-h)<=c)-(ee(r.top-h)<=c)),i||o||(o=(m-h<=c)-(h<=c),((i=(f-p<=c)-(p<=c))||o)&&(a=q)),X.vx===i&&X.vy===o&&X.el===a||(X.el=a,X.vx=i,X.vy=o,clearInterval(X.pid),a&&(X.pid=setInterval(function(){if(l=o?o*u:0,s=i?i*u:0,"function"==typeof T)return T.call(d,s,l,e);a===q?q.scrollTo(q.pageXOffset+s,q.pageYOffset+l):(a.scrollTop+=l,a.scrollLeft+=s)},24)))}},30),ie=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=n.name),"function"==typeof e?e:function(n,a){var r=a.options.group.name;return t?e:e&&(e.join?e.indexOf(r)>-1:r==e)}}var n={},a=e.group;a&&"object"==(void 0===a?"undefined":l(a))||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Q={capture:!1,passive:!1}}}))}catch(e){}return e.prototype={constructor:e,_onTapStart:function(e){var t,a=this,r=this.el,i=this.options,o=i.preventOnFilter,s=e.type,l=e.touches&&e.touches[0],c=(l||e).target,u=e.target.shadowRoot&&e.path&&e.path[0]||c,p=i.filter;if(function(e){for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&ne.push(a)}}(r),!w&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||i.disabled)&&!u.isContentEditable&&(c=n(c,i.draggable,r))&&k!==c){if(t=h(c,i.draggable),"function"==typeof p){if(p.call(this,e,c,this))return d(a,u,"filter",c,r,r,t),void(o&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=n(u,e.trim(),r))return d(a,e,"filter",c,r,r,t),!0})))return void(o&&e.preventDefault());i.handle&&!n(u,i.handle,r)||this._prepareDragStart(e,l,c,t)}},_prepareDragStart:function(e,t,n,r){var o,l=this,c=l.el,p=l.options,h=c.ownerDocument;n&&!w&&n.parentNode===c&&(W=e,L=c,E=(w=n).parentNode,D=w.nextSibling,k=n,H=p.group,I=r,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,w.style["will-change"]="all",o=function(){l._disableDelayedDrag(),w.draggable=l.nativeDraggable,i(w,p.chosenClass,!0),l._triggerDragStart(e,t),d(l,L,"choose",w,L,L,I)},p.ignore.split(",").forEach(function(e){s(w,e.trim(),u)}),a(h,"mouseup",l._onDrop),a(h,"touchend",l._onDrop),a(h,"touchcancel",l._onDrop),a(h,"selectstart",l),p.supportPointer&&a(h,"pointercancel",l._onDrop),p.delay?(a(h,"mouseup",l._disableDelayedDrag),a(h,"touchend",l._disableDelayedDrag),a(h,"touchcancel",l._disableDelayedDrag),a(h,"mousemove",l._disableDelayedDrag),a(h,"touchmove",l._disableDelayedDrag),p.supportPointer&&a(h,"pointermove",l._disableDelayedDrag),l._dragStartTimer=U(o,p.delay)):o())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag),r(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){(t=t||("touch"==e.pointerType?e:null))?(W={target:w,clientX:t.clientX,clientY:t.clientY},this._onDragStart(W,"touch")):this.nativeDraggable?(a(w,"dragend",this),a(L,"dragstart",this._onDragStart)):this._onDragStart(W,!0);try{j.selection?b(function(){j.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(L&&w){var t=this.options;i(w,t.ghostClass,!0),i(w,t.dragClass,!1),e.active=this,d(this,L,"start",w,L,L,I)}else this._nulling()},_emulateDragOver:function(){if(Y){if(this._lastX===Y.clientX&&this._lastY===Y.clientY)return;this._lastX=Y.clientX,this._lastY=Y.clientY,J||o(x,"display","none");var e=j.elementFromPoint(Y.clientX,Y.clientY),t=e,n=ae.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(Y.clientX,Y.clientY)),t)do{if(t[R]){for(;n--;)ae[n]({clientX:Y.clientX,clientY:Y.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);J||o(x,"display","")}},_onTouchMove:function(t){if(W){var n=this.options,a=n.fallbackTolerance,r=n.fallbackOffset,i=t.touches?t.touches[0]:t,s=i.clientX-W.clientX+r.x,l=i.clientY-W.clientY+r.y,d=t.touches?"translate3d("+s+"px,"+l+"px,0)":"translate("+s+"px,"+l+"px)";if(!e.active){if(a&&te(ee(i.clientX-this._lastX),ee(i.clientY-this._lastY))<a)return;this._dragStarted()}this._appendGhost(),V=!0,Y=i,o(x,"webkitTransform",d),o(x,"mozTransform",d),o(x,"msTransform",d),o(x,"transform",d),t.preventDefault()}},_appendGhost:function(){if(!x){var e,t=w.getBoundingClientRect(),n=o(w),a=this.options;i(x=w.cloneNode(!0),a.ghostClass,!1),i(x,a.fallbackClass,!0),i(x,a.dragClass,!0),o(x,"top",t.top-$(n.marginTop,10)),o(x,"left",t.left-$(n.marginLeft,10)),o(x,"width",t.width),o(x,"height",t.height),o(x,"opacity","0.8"),o(x,"position","fixed"),o(x,"zIndex","100000"),o(x,"pointerEvents","none"),a.fallbackOnBody&&j.body.appendChild(x)||L.appendChild(x),e=x.getBoundingClientRect(),o(x,"width",2*t.width-e.width),o(x,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,s=n.options;n._offUpEvents(),H.checkPull(n,n,w,e)&&((C=v(w)).draggable=!1,C.style["will-change"]="",o(C,"display","none"),i(C,n.options.chosenClass,!1),n._cloneId=b(function(){L.insertBefore(C,w),d(n,L,"clone",w)})),i(w,s.dragClass,!0),t?("touch"===t?(a(j,"touchmove",n._onTouchMove),a(j,"touchend",n._onDrop),a(j,"touchcancel",n._onDrop),s.supportPointer&&(a(j,"pointermove",n._onTouchMove),a(j,"pointerup",n._onDrop))):(a(j,"mousemove",n._onTouchMove),a(j,"mouseup",n._onDrop)),n._loopId=setInterval(n._emulateDragOver,50)):(r&&(r.effectAllowed="move",s.setData&&s.setData.call(n,r,w)),a(j,"drop",n),n._dragStartId=b(n._dragStarted))},_onDragOver:function(a){var r,i,s,l,d=this.el,u=this.options,h=u.group,f=e.active,m=H===h,g=!1,v=u.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!u.dragoverBubble&&a.stopPropagation()),!w.animated&&(V=!0,f&&!u.disabled&&(m?v||(l=!L.contains(w)):O===this||(f.lastPullMode=H.checkPull(this,f,w,a))&&h.checkPut(this,f,w,a))&&(void 0===a.rootEl||a.rootEl===this.el))){if(re(a,u,this.el),K)return;if(r=n(a.target,u.draggable,d),i=w.getBoundingClientRect(),O!==this&&(O=this,g=!0),l)return t(f,!0),E=L,void(C||D?L.insertBefore(w,C||D):v||L.appendChild(w));if(0===d.children.length||d.children[0]===x||d===a.target&&function(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}(d,a)){if(0!==d.children.length&&d.children[0]!==x&&d===a.target&&(r=d.lastElementChild),r){if(r.animated)return;s=r.getBoundingClientRect()}t(f,m),!1!==c(L,d,w,i,r,s,a)&&(w.contains(d)||(d.appendChild(w),E=d),this._animate(i,w),r&&this._animate(s,r))}else if(r&&!r.animated&&r!==w&&void 0!==r.parentNode[R]){S!==r&&(S=r,N=o(r),M=o(r.parentNode));var b=(s=r.getBoundingClientRect()).right-s.left,y=s.bottom-s.top,k=F.test(N.cssFloat+N.display)||"flex"==M.display&&0===M["flex-direction"].indexOf("row"),A=r.offsetWidth>w.offsetWidth,_=r.offsetHeight>w.offsetHeight,T=(k?(a.clientX-s.left)/b:(a.clientY-s.top)/y)>.5,I=r.nextElementSibling,B=!1;if(k){var W=w.offsetTop,Y=r.offsetTop;B=W===Y?r.previousElementSibling===w&&!A||T&&A:r.previousElementSibling===w||w.previousElementSibling===r?(a.clientY-s.top)/y>.5:Y>W}else g||(B=I!==w&&!_||T&&_);var X=c(L,d,w,i,r,s,a,B);!1!==X&&(1!==X&&-1!==X||(B=1===X),K=!0,U(p,30),t(f,m),w.contains(d)||(B&&!I?d.appendChild(w):r.parentNode.insertBefore(w,B?I:r)),E=w.parentNode,this._animate(i,w),this._animate(s,r))}}},_animate:function(e,t){var n=this.options.animation;if(n){var a=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),o(t,"transition","none"),o(t,"transform","translate3d("+(e.left-a.left)+"px,"+(e.top-a.top)+"px,0)"),t.offsetWidth,o(t,"transition","all "+n+"ms"),o(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=U(function(){o(t,"transition",""),o(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(j,"touchmove",this._onTouchMove),r(j,"pointermove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"pointerup",this._onDrop),r(e,"touchcancel",this._onDrop),r(e,"pointercancel",this._onDrop),r(e,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;clearInterval(this._loopId),clearInterval(X.pid),clearTimeout(this._dragStartTimer),y(this._cloneId),y(this._dragStartId),r(j,"mouseover",this),r(j,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(j,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(V&&(t.preventDefault(),!a.dropBubble&&t.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),L!==E&&"clone"===e.active.lastPullMode||C&&C.parentNode&&C.parentNode.removeChild(C),w&&(this.nativeDraggable&&r(w,"dragend",this),u(w),w.style["will-change"]="",i(w,this.options.ghostClass,!1),i(w,this.options.chosenClass,!1),d(this,L,"unchoose",w,E,L,I),L!==E?(B=h(w,a.draggable))>=0&&(d(null,E,"add",w,E,L,I,B),d(this,L,"remove",w,E,L,I,B),d(null,E,"sort",w,E,L,I,B),d(this,L,"sort",w,E,L,I,B)):w.nextSibling!==D&&(B=h(w,a.draggable))>=0&&(d(this,L,"update",w,E,L,I,B),d(this,L,"sort",w,E,L,I,B)),e.active&&(null!=B&&-1!==B||(B=I),d(this,L,"end",w,E,L,I,B),this.save()))),this._nulling()},_nulling:function(){L=w=E=x=D=C=k=A=_=W=Y=V=B=S=N=O=H=e.active=null,ne.forEach(function(e){e.checked=!0}),ne.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":w&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}(e));break;case"mouseover":this._onDrop(e);break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],a=this.el.children,r=0,i=a.length,o=this.options;r<i;r++)n(e=a[r],o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||function(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}(e));return t},sort:function(e){var t={},a=this.el;this.toArray().forEach(function(e,r){var i=a.children[r];n(i,this.options.draggable,a)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(a.removeChild(t[e]),a.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&ie(n)},destroy:function(){var e=this.el;e[R]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),r(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),ae.splice(ae.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},a(j,"touchmove",function(t){e.active&&t.preventDefault()}),e.utils={on:a,off:r,css:o,find:s,is:function(e,t){return!!n(e,t,e)},extend:g,throttle:m,closest:n,toggleClass:i,clone:v,index:h,nextTick:b,cancelNextTick:y},e.create=function(t,n){return new e(t,n)},e.version="1.7.0",e})}),b="esri-header-apps",y="rtl"===document.dir,w=function(){var e=t("div",{class:b+"-content",id:b+"-content",aria:{expanded:!1,labelledby:b+"-control"}}),r=t("span",{title:"App Launcher","aria-label":"App Launcher Icon"}),o=t("button",{class:b+"-control empty-padding",id:b+"-control"},r),s=function(t){H(),O(),p.showMoreButton.classList.remove("hide"),c.setAttribute("aria-expanded","false"),a(l,"header:menu:toggle",{state:"menu",target:d,type:"root-toggle",control:l,content:e,event:t})},l=o;o.addEventListener("click",s);var d=t("div",{class:b},l),c=t("div",{class:b+" secondary-dropdown-menu",aria:{expanded:!1}},t("hr")),u=t("div",{class:b+" bottom-container"}),p={maxDragErrorTollerance:1},h=40,f=38,m=39,g=37,w=32,E=function(e,n){var a=["0px","32px","24px","20px","18px","16px","14px"],r=p.browserIsEdge?"user-select-none":"",i=t("li",{alt:"",class:"block link-off-black appLinkContainer grabbable "+(n.canAccess?"with-hover":"no-hover"),mousedown:_.bind(null,n),keyup:X.bind(null,n),keydown:F,role:"menuitem","data-id":n.itemId});if(n.canAccess){n.isNew&&i.appendChild(t("div",{class:"app-indicator app-indicator-new"}));var o=t("a",{href:n.url,target:"_blank",blur:P.bind(null,n),class:"appLink"});if(n.image){var s=t("div",{class:"appIconImage "+r});s.appendChild(G()),s.appendChild(t("img",{class:"appIconPng",alt:"",src:n.image})),o.appendChild(s)}else{var l=Math.round(k(n.abbr||"","avenir")/5),d=a[l];l>6&&(n.abbr=n.abbr.substr(0,4),d=a[4]);var c=t("div",{class:"appIconImage"});c.appendChild(G());var u=t("span",{style:"font-size: "+d,class:"avenir appIconSvgText "+r},n.abbr);c.appendChild(u),c.appendChild(t("img",{src:n.placeHolderIcon,alt:"",class:r})),o.appendChild(c)}i.appendChild(o);var h=t("p",{style:"margin:0 auto; text-align:center",class:r},n.label);o.appendChild(h)}else x(n,i,r);e.appendChild(i)},x=function(e,n,a){var r=t("div",{class:"app-indicator app-indicator-removed",tabindex:0,click:N.bind(null,e.uid,n),keyup:N.bind(null,e.uid,n),keydown:F});r.innerHTML=A();var i=t("div",{class:"missing-app-icon appIconImage",tabindex:0,blur:P.bind(null,e),title:p.i18n.removed});i.appendChild(G()),n.appendChild(r),n.appendChild(i),n.appendChild(t("p",{style:"margin:0 auto; text-align:center",class:a},e.label))},C=function(e,t,n){a(l,"header:apps:reorder",{icons:{primaryApps:e,secondaryApps:t,revisions:n||{}}})},L=function(){c.setAttribute("aria-expanded","true"),p.showMoreButton.classList.add("hide")},D=function(e){e===p.bottomAppContainer&&1===p.secondarySortable.toArray().length?(p.bottomAppContainer.classList.remove("drag-apps-here-box"),p.dragAppsHereText.classList.add("hide")):p.secondarySortable.toArray().length||(p.bottomAppContainer.classList.add("drag-apps-here-box"),p.dragAppsHereText.classList.remove("hide"))},k=function e(t,n){var a=(e.canvas||(e.canvas=document.createElement("canvas"))).getContext("2d");a.font=n;return a.measureText(t).width},A=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 32 32"><path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/></svg>'},_=function(e,t){if(0===t.button){if(p.startClientX=t.clientX,p.startClientY=t.clientY,p.startApp=e,p.startElement=t.currentTarget,p.disabled)return void(e.canAccess&&p.dropdownNav.addEventListener("mouseup",T));if(setTimeout(function(e){p.startElement.classList.remove("sortable-drag-class")},1),e.isNew){var n=p.primarySortable.toArray();p.duplicateValueIndex&&n.splice(p.duplicateValueIndex,1),C(n,p.secondarySortable.toArray(),{targetUid:t.currentTarget.getAttribute("data-id"),isNew:!0,targetValue:null}),t.currentTarget.classList.remove("sortable-drag-class")}else t.currentTarget.classList.remove("sortable-drag-class");if(p.listenForMouseOverElement=t.currentTarget.parentNode,p.listenForMouseOverElement.addEventListener("mousemove",W),e.canAccess)p.dropdownNav.addEventListener("mouseup",s);else{var a="app-indicator app-indicator-removed";t.target.classList.className!==a&&t.target.parentNode.className!==a&&t.target.parentNode.parentNode.className!==a||(p.removeStartApp=!0)}}},T=function e(t){p.dropdownNav.removeEventListener("mouseup",e,!1),Y(t.clientX,t.clientY)||s()},S=function(e,t,n){p.disabled||(e.canAccess?(s(),window.open(e.url,"_blank")):n?(p.removeStartApp=!1,N(e.itemId||e.title,t)):M(e.itemId||e.title,t))},N=function(e,t,n){n&&!V(n.keyCode)||(!function(e){e.parentNode&&e.parentNode.removeChild(e)}(t),setTimeout(function(){C(p.primarySortable.toArray(),p.secondarySortable.toArray())},0))},M=function(e,t,n){p.removedAppWithFoucs||n&&!V(n.keyCode)?p.removedAppWithFoucs=null:p.removedAppWithFoucs={uid:e,el:t}},I=function(e,t){var n=e.item.children[1]&&"A"===e.item.children[1].nodeName?e.item.children[1]:e.item.children[0];t?(p.recentlyRemovedHref=n.href,n.removeAttribute("href")):setTimeout(function(){n.href=p.recentlyRemovedHref},1)},B=function(e){p.dragAndDropIntro.classList.add("hide"),C(p.primarySortable.toArray(),p.secondarySortable.toArray())},H=function(){p.dropdownNav&&p.dropdownNav.removeEventListener&&p.dropdownNav.removeEventListener("mouseup",s,!1)},O=function(){p.listenForMouseOverElement&&p.listenForMouseOverElement.removeEventListener("mousemove",W,!1)},W=function(e){Y(e.clientX,e.clientY)&&(p.simulatedDragEvent=!0,p.dropdownWrapper.classList.add("dragging"),O())},Y=function(e,t){return Math.abs(e-p.startClientX)>p.maxDragErrorTollerance||Math.abs(t-p.startClientY)>p.maxDragErrorTollerance},V=function(e){return!e||13===e},X=function(e,t){if("app-indicator app-indicator-removed"===!t.target.className&&(t.preventDefault(),t.keyCode===w)){if(p.activeAccessibleListElement)return P(e,t);var n=e.canAccess?t.target.firstChild.firstChild:t.target.firstChild,a=t.target.parentNode,r=a.parentNode,i=z(a),o=p.primarySortable.toArray().length;L();var s=U(i,r,o);p.activeAccessibleListElement=a,p.activeAccessibleListElementEvent=R.bind(null,e,K(s,r),a,r,i),a.addEventListener("keydown",p.activeAccessibleListElementEvent),Q(n,i,r,o)}return!1},P=function(e,t){var n=t.target||t,a=e.canAccess?n.firstChild.firstChild:n.firstChild;a.classList.remove("arrow-keys-enabled"),a.classList.add("arrow-keys-disabled"),p.activeAccessibleListElement&&(p.activeAccessibleListElement.removeEventListener("keydown",p.activeAccessibleListElementEvent,!1),p.activeAccessibleListElement=null)},F=function(e){e.keyCode!==w&&e.keyCode!==h&&e.keyCode!==f||e.preventDefault()},R=function(e,t,n,a,r,i){var o=function(e){return e.keyCode===h?"bottom":e.keyCode===f?"top":e.keyCode===m?y?"left":"right":e.keyCode===g?y?"right":"left":void 0}(i);"bottom"===o&&t.indexOf("bottom")>-1&&q(n,r,a,3,e,i),"top"===o&&t.indexOf("top")>-1&&q(n,r,a,-3,e,i),"right"===o&&t.indexOf("right")>-1&&q(n,r,a,1,e,i),"left"===o&&t.indexOf("left")>-1&&q(n,r,a,-1,e,i)},q=function(e,t,n,a,r,i){var o=t+a,s=n===p.bottomAppContainer?n.children.length-1:n.children.length,l=n===p.topAppContainer;if(l&&o<s||!l&&o<=s&&o>0){var d=a<0?n.children[o]:n.children[o].nextSibling;n.insertBefore(e,d)}else l?($(e,t,a),D(p.bottomAppContainer)):(j(e,t,a),D(p.topAppContainer));P(r,i),r.canAccess&&!r.isNew?e.children[0].focus():e.children[1].focus(),setTimeout(function(){r.isNew?C(p.primarySortable.toArray(),p.secondarySortable.toArray(),{targetUid:r.itemId||r.title,isNew:!0,targetValue:null}):C(p.primarySortable.toArray(),p.secondarySortable.toArray())},0)},j=function(e,t,n){var a=p.topAppContainer,r=t%3||3,i=o%3||3,o=p.topAppContainer.children.length;return 1===Math.abs(n)||3===i?a.appendChild(e):2===r&&i>1?a.insertBefore(e,a.children[o-(i-1)]):1===r&&o?a.insertBefore(e,a.children[o-i]):void a.appendChild(e)},$=function(e,t,n){var a=p.bottomAppContainer,r=p.bottomAppContainer.children.length-1,i=(t+1)%3||3;return r?1===Math.abs(n)?a.insertBefore(e,a.children[1]):2===i&&r>1?a.insertBefore(e,a.children[2]):3===i&&2===r?a.insertBefore(e,a.children[3]):void a.insertBefore(e,a.children[1]):a.appendChild(e)},U=function(e,t,n){return e+(t===p.bottomAppContainer?n+1:1)},z=function(e){var t=e.parentNode;return Array.prototype.indexOf.call(t.children,e)},G=function(){return t("span",{class:"arrow-keys-disabled"})},Q=function(e,t,n,a){e.classList.add("arrow-keys-enabled"),e.classList.remove("arrow-keys-disabled");var r=U(t,n,a);e.innerHTML=Z(K(r,n),n)},Z=function(e){return e.reduce(function(e,t){return e+J(t)},"")},J=function(e){return'<div class="app-arrow app-arrow-'+e+'"></div>'},K=function(e,t){var n=[],a=p.topAppContainer.children.length,r=p.bottomAppContainer.children.length,i=a+r;return e-1>0&&n.push("left"),(e+1<=i||!r)&&e!==a&&n.push("right"),e-3>0&&n.push("top"),(e-a+2<r||t===p.topAppContainer)&&n.push("bottom"),n},ee={group:"Apps",sort:!0,disabled:!1,animation:150,forceFallback:!0,delay:0,fallbackTolerance:0,ghostClass:"sortable-ghost-class",dragClass:"sortable-drag-class",onStart:function(e){p.dragAppsHereText.classList.add("hide"),H(),I(e,!0)},onEnd:function(e){return e.preventDefault(),O(),I(e,!1),p.dropdownWrapper.classList.remove("dragging"),p.bottomAppContainer.classList.remove("on-drag-over"),D(e.to),!1},onMove:function(e,t){e.to===p.bottomAppContainer?p.bottomAppContainer.classList.add("on-drag-over"):p.bottomAppContainer.classList.remove("on-drag-over")},store:{get:function(e){return e.options.group.name&&e.options.group.name.split("!")||[]},set:function(e){p.simulatedDragEvent?C(e.toArray(),p.secondarySortable.toArray()):S(p.startApp,p.startElement,p.removeStartApp),p.startElement.classList.remove("sortable-drag-class"),p.simulatedDragEvent=!1}}},te={group:"Apps",sort:!0,disabled:!1,animation:150,forceFallback:!0,delay:0,fallbackTolerance:0,ghostClass:"sortable-ghost-class",dragClass:"sortable-drag-class",onStart:function(e){H(),I(e,!0)},onEnd:function(e){e.preventDefault(),O(),I(e,!1),p.dropdownWrapper.classList.remove("dragging"),e.to!==p.topAppContainer||p.secondarySortable.toArray().length||(p.bottomAppContainer.classList.add("drag-apps-here-box"),p.dragAppsHereText.classList.remove("hide"))},store:{get:function(e){return e.options.group.name&&e.options.group.name.split("!")||[]},set:function(e){p.simulatedDragEvent?C(p.primarySortable.toArray(),e.toArray()):S(p.startApp,p.startElement,p.removeStartApp),p.startElement.classList.remove("sortable-drag-class"),p.simulatedDragEvent=!1}}};return d.addEventListener("header:update:apps",function(a){var o=a.detail;i({imgDef:o.image.path,imgWidth:o.image.width,imgHeight:o.image.height,"shape-rendering":"crispEdges",imgClass:b+" svg-grid-icon",$targetElm:r});if(o.primary)if(o.ieVersion&&function(e){"edge"===e?p.browserIsEdge=!0:"ie11"===e&&(ee.ghostClass="sortable-ghost-class-with-pointer-events",te.ghostClass="sortable-ghost-class-with-pointer-events")}(o.ieVersion),o.disableDragAndDrop&&(p.disabled=!0),o.text&&(p.i18n=o.text||{}),o.isLoading)l.className=b+"-control disabled-grid-icon",l.removeEventListener("click",s,!1),n(d,l);else{d.appendChild(e),l.className=b+"-control",t(l,{aria:{label:o.label}});var h=o.primary.length,f=" dropdown-width-"+(h<3?h:3);p.topAppContainer=t("ul",{class:b+" appContainer primary",role:"menu"}),p.bottomAppContainer=t("ul",{class:b+" appContainer secondary",role:"menu"}),p.disabled||(p.dragAppsHereText=t("p",{class:"hide"},p.i18n.dragAppsHere),p.bottomAppContainer.appendChild(p.dragAppsHereText),p.primarySortable=v.create(p.topAppContainer,ee),p.secondarySortable=v.create(p.bottomAppContainer,te)),o.primary.forEach(function(e,t){E(p.topAppContainer,e)}),o.secondary.forEach(function(e,t){E(p.bottomAppContainer,e)}),u.appendChild(p.bottomAppContainer),c.appendChild(u);var m=t("div",{class:"dropdown"}),g=t("p",{class:b+" drag-and-drop-intro"},p.i18n.intro),y=t("button",{class:b+" dismiss-intro-button",click:B},p.i18n.confirm);p.dragAndDropIntro=o.displayIntro?t("div",{class:b+" intro-container"},g,y):"";var w=t("span");w.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 32 32" class="down-carrot-svg js-prevent-dropdown__app-switcher"><path d="M28 9v5L16 26 4 14V9l12 12L28 9z"></path></svg>',p.showMoreButton=t("button",{class:b+" show-more-button",click:L},p.i18n.showMore,w),p.dropdownWrapper=t("div",{},p.dragAndDropIntro,p.topAppContainer,p.showMoreButton,c),p.dropdownNav=t("nav",{class:b+" dropdown-menu dropdown-right app-switcher-dropdown-menu "+f,role:"menu"},p.dropdownWrapper),m.appendChild(p.dropdownNav),e.appendChild(m),n(d,l,e)}}),d},E=function(e){var o=void 0,s=void 0,l=t("button",{class:"esri-header-canvas",tabindex:"-1",data:{open:!1}});l.addEventListener("click",function(){a(l,"header:menu:close")});var h=function(){var e=t("div",{class:p,id:p});return e.addEventListener("header:update:brand",function(t){var n=t.detail;e.style.backgroundColor=n.topStripe,e.classList.add("-visible")}),e}(),m=function(){var e=t("a",{class:u,id:u});return e.addEventListener("click",function(t){a(e,"header:click:brand",{event:t})}),e.addEventListener("header:update:brand",function(n){var a=n.detail;if(t(e,{href:a.href}),a.distributorImage){var r=t("span",{class:"distributor-image"});i({imgDef:a.distributorImage,imgClass:u+"-image",imgWidth:a.distributorImageWidth,imgHeight:a.distributorImageHeight,$targetElm:r}),t(e,r,t("span",{class:"distributor-image-border"}))}if(a.image){var o=t("span",{class:"brand-image"});t(e,{aria:{label:a.label}}),i({imgDef:a.image,imgClass:u+"-image",imgWidth:a.width,imgHeight:a.height,$targetElm:o}),t(e,o)}if(a.brandText){var s=t("span",{class:a.image?u+"-text -has-image":u+"-text"},a.brandText);t(e,s)}}),e}(),v=function(){var e=t("div",{class:c}),r=document.createTextNode(""),o=t("button",{class:c+"-control "+c+"-control--signin"},r);o.addEventListener("click",function(e){a(o,"header:click:signin",{event:e})});var s=t("span"),l=document.createTextNode(""),u=t("span",{class:c+"-name"},l),p=document.createTextNode(""),h=t("span",{class:c+"-id"},p),f=t("button",{class:c+"-control "+c+"-control--signedin",id:c+"-control",aria:{controls:c+"-menu",expanded:!1,haspopup:!0}},s,u,h);f.addEventListener("click",function(t){a(f,"header:click:account",{event:t}),a(f,"header:menu:toggle",{account:!0,control:f,content:_,state:"menu",target:e,type:"account-toggle"})});var m=document.createTextNode(""),g=t("button",{class:c+"-content-toggle"},m);g.addEventListener("click",function(){a(g,"header:menu:close",{control:f,content:_,type:"account-close"})});var v=t("span"),b=document.createTextNode(""),y=document.createTextNode(""),w=document.createTextNode(""),E=t("div",{class:c+"-content-info"},v,t("span",{class:c+"-content-name"},b),t("span",{class:c+"-content-id"},y),t("span",{class:c+"-content-group"},w)),x=t("ul",{class:c+"-content-menu",role:"navigation",aria:{labelledby:c+"-control"}}),C=document.createTextNode(""),L=t("button",{class:c+"-signin-control -switch"},C);L.addEventListener("click",function(e){a(L,"header:click:switch",{event:e})});var D=document.createTextNode(""),k=t("button",{class:c+"-signin-control -logout"},D);k.addEventListener("click",function(e){a(k,"header:click:signout",{event:e})});var A=t("ul",{class:c+"-signin-menu",role:"group"},t("li",{class:c+"-signin-item"},L),t("li",{class:c+"-signin-item"},k)),_=t("div",{class:c+"-menu",id:c+"-menu",role:"group",aria:{expanded:!1,hidden:!0}},g,E,x,A);return e.addEventListener("header:update:account",function(a){var u=a.detail;t(f,{aria:{label:u.label}}),m.nodeValue=u.label,r.nodeValue=u.controls.signin,C.nodeValue=u.controls.switch,D.nodeValue=u.controls.signout,u.user?(l.nodeValue=b.nodeValue=u.user.name,p.nodeValue=y.nodeValue=u.user.id,w.nodeValue=u.user.group,i({imgDef:u.user.image,imgClass:c+"-image",$targetElm:s}),i({imgDef:u.user.image,imgClass:c+"-content-image",$targetElm:v}),n.apply(void 0,[x].concat(d(u.menus.map(function(e){return t("li",{class:c+"-content-item"},t("a",{class:c+"-content-link",href:e.href},e.label))})))),n(e,f,_)):n(e,o)}),e}(),b=f({variant:"mobile"}),y=f({variant:"desktop"}),E=g(),x=w(),C=t("div",{class:"esri-header-client"},v),L=t("div",{class:"esri-header-lineBreak"}),D=t("div",{class:"esri-header -"+(e.theme||"web")},l,h,m,b,y,E,L,x,C);r(D),D.addEventListener("header:update",function(e){var t=e.detail;t.brand&&(t.brand.topStripe&&(a(h,"header:update:brand",t.brand),D.style.marginTop="3px"),a(m,"header:update:brand",t.brand)),t.menus&&(a(y,"header:update:menus",t.menus),a(b,"header:update:menus",t.menus)),t.collapseMenus&&(a(y,"header:update:collapseMenus",t.collapseMenus),a(b,"header:update:collapseMenus",t.collapseMenus)),t.search&&a(E,"header:update:search",t.search),t.account&&a(C.lastChild,"header:update:account",t.account),t.account&&a(C.lastChild,"header:update:account",t.account),t.apps&&a(x,"header:update:apps",t.apps),D.ownerDocument.defaultView.addEventListener("keydown",function(e){27===e.keyCode&&a(D,"header:menu:close")})}),D.addEventListener("header:apps:reorder",function(e){var t=e.detail;a(x,"header::apps:reorder",t.icons)}),D.addEventListener("header:menu:toggle",function(e){var t=e.detail,n="true"!==t.control.getAttribute("aria-expanded")?"header:menu:open":"header:menu:close";a(t.control,n,t)});var k=null,A=null,_=null,T=null,S=null;return D.addEventListener("header:menu:open",function(e){var n=e.detail,r="menu-toggle"===n.type;t(n.control,{aria:{expanded:!0}}),t(n.content,{aria:{expanded:!0,hidden:!1}}),T&&T.control!==n.control&&a(T.control,"header:menu:close",T),"menu-toggle"===n.type&&(T=n),E===n.target?A=n:A&&(a(E,"header:menu:close",A),A=null),y===n.target||b===n.target?_=n:!_||r||o.matches||(a(y,"header:menu:close",_),a(b,"header:menu:close",_),_=null),v===n.target?k=n:k&&(a(v,"header:menu:close",k),k=null),x===n.target?S=n:S&&(a(x,"header:menu:close",S),S=null),t(l,{data:{open:!0,state:n.state}}),t(D.ownerDocument.documentElement,{data:{"header-is-open":!0}})}),D.addEventListener("header:menu:close",function(e){var n=e.detail||_||A||k||S||T;if(n){t(n.control,{aria:{expanded:!1}}),t(n.content,{aria:{expanded:!1,hidden:!0}});var r=!s.matches||"menu-close"!==n.type&&"account-close"!==n.type;A&&A.control===n.control&&a(A.content.lastChild,"reset"),r&&(t(l,{data:{open:!1}}),D.ownerDocument.documentElement.removeAttribute("data-header-is-open"))}}),D.addEventListener("DOMNodeInserted",function r(){function i(){var e=c.documentElement.clientWidth,t=c.documentElement.clientHeight,a=c.documentElement.scrollHeight;h=getComputedStyle(c.documentElement).overflowY.replace("visible",a>t?"scroll":"visible"),n(p,":root{--esri-vw:"+e+"px;--esri-vh:"+t+"px}[data-header-is-open]{width:"+e+"px;height:"+t+"px;overflow-y:"+h+"}"),(s=u.matchMedia("(max-width: 1023px)")).matches?(y.querySelector(".esri-header-menus-content").classList.add("hidden"),b.querySelector(".esri-header-menus-content").classList.remove("hidden")):(y.querySelector(".esri-header-menus-content").classList.remove("hidden"),b.querySelector(".esri-header-menus-content").classList.add("hidden"))}function l(){o.matches?(a(D,"header:breakpoint:s"),b.lastChild.appendChild(v),y.lastChild.appendChild(v)):(a(D,"header:breakpoint:not:s"),C.appendChild(v))}function d(){s.matches?(a(D,"header:breakpoint:sm"),t(y.lastChild,{aria:{hidden:"false"===y.lastChild.getAttribute("aria-expanded")}})):(a(D,"header:breakpoint:not:sm"),t(y.lastChild,{aria:{hidden:!1}}))}var c=D.ownerDocument,u=c.defaultView,p=t("style"),h=void 0;D.parentNode&&(D.removeEventListener("DOMNodeInserted",r),a(D,"header:update",e),t(c.head,p),u.addEventListener("orientationchange",i),u.addEventListener("resize",i),o=u.matchMedia("(max-width: 767px)"),s=u.matchMedia("(max-width: 1023px)"),o.addListener(l),s.addListener(d),l(),d(),i())}),D},x=function(e,n){function r(e){e.preventDefault(),t(u,{aria:{expanded:!1}})}document.createTextNode(e.buttonLabel);var i=document.createElement("button");i.classList.add(n+"-language-control"),i.setAttribute("ariaDescribedby",n+"-language"),i.innerHTML=e.buttonLabel;var o=t("div",{class:n+"-language"},i);i.addEventListener("click",function(e){e.preventDefault(),t(u,{aria:{expanded:!0}})}),e.prefix=n+"-language-dialog";var s=function(e){var n=t.apply(void 0,["select",{class:e.prefix+"-choice",autofocus:"",aria:{label:e.optionsLabel}}].concat(d(e.options.map(function(e){var t=document.createElement("option");return t.value=e.value,t.innerHTML=e.label,t})))),a=t("form",{class:e.prefix,aria:{labelledby:e.prefix+"-message",describedby:"dialog-description"}},t("p",{class:e.prefix+"-message",id:e.prefix+"-message"},t("strong",e.greetingLabel)," ",e.messageLabel),n,t("button",{class:e.prefix+"-submit",type:"submit",aria:{label:e.submitLabel+" "+e.optionsLabel}},e.submitLabel));return a.addEventListener("submit",function(e){e.preventDefault(),window.location.href=n.value}),a}(e),l=t("button",{class:n+"-language-dialog-close",id:"dialog-description",ariaLabel:e.closeLabel});l.addEventListener("click",r),t(s,l);var c=t("button",{class:n+"-language-dialog-cancel-canvas",type:"button",tabindex:-1});c.addEventListener("click",r);var u=t("div",{class:n+"-language-dialog-barrier",aria:{expanded:!1}},s,c);return i.addEventListener("click",function(){a(i,"footer:click:language",e)}),o.addEventListener("footer:update:language",function(e){var t=e.detail;i.innerHTML=t.buttonLabel,o.ownerDocument.body.appendChild(u),o.ownerDocument.defaultView.addEventListener("keydown",function(){27===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:event).keyCode&&r(event)})}),o},C=function(e,n){function r(){l!==s.matches&&(l=s.matches,c.forEach(function(e){l?function(e){var n="true"!==e.nextElementSibling.getAttribute("aria-hidden");t(e,{tabindex:0,role:"button",aria:{expanded:!n,haspopup:!n}}),e.addEventListener("click",i),e.addEventListener("keypress",o),t(e.nextElementSibling,{aria:{hidden:!0}})}(e.firstChild):function(e){e.removeAttribute("aria-controls"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-haspopup"),e.removeAttribute("role"),e.removeAttribute("tabindex"),e.addEventListener("click",i),e.addEventListener("keypress",o),e.nextElementSibling.removeAttribute("aria-hidden")}(e.firstChild)}))}function i(e){var n=e.currentTarget,a=n.nextElementSibling,r="true"!==a.getAttribute("aria-hidden");t(n,{aria:{expanded:!r,haspopup:!r}}),t(a,{aria:{hidden:r}}),t(n,r?{aria:{controls:0}}:{aria:{controls:a.id}})}function o(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),a(e.currentTarget,"click"))}var s=matchMedia("(max-width: 719px)"),l=!1;s.addListener(r);var c=e.menu.map(function(e,a){return t("li",{class:n+"-menu-item",id:n+"-menu-link--"+a},t("span",{class:n+"-menu-link",role:"heading"},e.label),t("div",{class:n+"-menu--sub",id:n+"-menu--sub--"+a,aria:{labelledby:n+"-menu-link--"+a}},t.apply(void 0,["ul",{class:n+"-menu-list--sub",role:"presentation"}].concat(d(e.menu.map(function(e){return t("li",{class:n+"-menu-item--sub"},t("a",{class:n+"-menu-link--sub",href:e.href},e.label))}))))))}),u=t("div",{class:n+"-menu",aria:{label:e.label}},t.apply(void 0,["ul",{class:n+"-menu-list",role:"presentation"}].concat(d(c))));return r(),u},L=function(e){var n=e.prefix||"esri-footer",o=function(e,n){return t("div",{class:n+"-brand"},t("a",{class:n+"-brand-link",href:e.href,aria:{label:e.label}},i({imgDef:e.path,imgClass:n+"-brand-image"})))}(e.brand,n),s=function(e,n){return t("div",{class:n+"-info",aria:{label:e.label}},t.apply(void 0,["ul",{class:n+"-info-list",role:"presentation"}].concat(d(e.menu.map(function(e,a){return t("li",{class:n+"-info-item",id:n+"-info-link--"+a},t("a",{class:n+"-info-link",href:e.href},e.label))})))))}(e.info,n),l=e.language?x(e.language,n):t("div",{class:"esri-footer-language"}),c=C(e.menu,n),u=function(e,n){var a=document.createDocumentFragment();return e.menu.forEach(function(e){t(a,t("li",{class:n+"-social-item"},t("a",{class:n+"-social-link -"+e.label.toLowerCase().replace(" ","-"),href:e.href,aria:{label:e.label}},i({imgDef:e.image.path,imgClass:n+"-social-image",imgWidth:30,imgHeight:30,viewBox:e.image.viewBox}))))}),t("div",{class:n+"-social",aria:{label:e.label}},t("ul",{class:n+"-social-list",role:"presentation"},a))}(e.social,n),p=t("footer",{class:n+" "+(e.hideMenus?"skinny-footer":""),role:"navigation",aria:{label:e.label}},t("div",{class:n+"-section--1 "+(e.hideMenus?"hidden":"")},o,u),t("div",{class:n+"-section--2 "+(e.hideMenus?"hidden":"")},c),t("div",{class:n+"-section--3"},l,s));return p.addEventListener("DOMNodeInserted",function t(){p.removeEventListener("DOMNodeInserted",t),p.addEventListener("focusin",function(){var e=p.ownerDocument.documentElement.scrollHeight-p.scrollHeight;e>p.ownerDocument.defaultView.pageYOffset&&p.ownerDocument.defaultView.scrollTo(0,e)}),e.hideMenus&&document.querySelector(".esri-footer-barrier").classList.add("skinny-footer"),a(p,"footer:update",e)}),r(p),p.addEventListener("footer:update",function(e){function n(){var e=0>window.pageYOffset;t(p,{data:{hidden:e}})}var r=e.detail;r.brand&&a(o,"footer:update:brand",r.brand),r.info&&a(s,"footer:update:info",r.info),r.language&&a(l,"footer:update:language",r.language),r.menu&&a(c,"footer:update:menu",r.menu),r.social&&a(u,"footer:update:social",r.social),p.ownerDocument.defaultView.addEventListener("scroll",n),n()}),p};window.esriHeader={create:E},window.esriFooter={create:L};return{createHeader:o,createFooter:s,create:function(e){var t=e.headerElm,n=e.footerElm,a=e.menuData;o({menuData:a,targetElm:t}),s({menuData:a,targetElm:n})}}});
//# sourceMappingURL=esri-global-nav.js.map
