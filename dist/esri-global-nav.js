!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.esriGlobalNav=t()}(this,function(){"use strict";function e(t,n,a){for(var r in n)"function"==typeof n[r]?t.addEventListener(a+r,n[r]):Object(n[r])===n[r]?e(t,n[r],a+r+"-"):t.setAttribute(a+r,n[r])}function t(t){var n=t instanceof Node?t:document.createElement(t);return[].slice.call(arguments,1).forEach(function(t){t instanceof Node?n.appendChild(t):"string"==typeof t?n.innerHTML=t:e(n,t,"")}),n}function n(e){for(;e.lastChild;)e.removeChild(e.lastChild);return e.appendChild(a(arguments)),e}function a(e){var t=document.createDocumentFragment();return[].slice.call(e,1).forEach(function(e){e instanceof Node?t.appendChild(e):t.appendChild(document.createTextNode(e))}),t}function r(e){return e.parentNode&&e.parentNode.removeChild(e),e}function i(e,t,n){var a=document.createEvent("CustomEvent");a.initCustomEvent(t,!0,!0,n),e.dispatchEvent(a)}function o(e){var t=void 0,n=[];e.addEventListener("blur",function(){n.forEach(function(e){e.removeAttribute("js-focus"),e.removeAttribute("js-focus-ring")})},!0),e.addEventListener("focus",function(){var e=document.activeElement;e instanceof Element&&(e.setAttribute("js-focus",""),t&&e.setAttribute("js-focus-ring",""),n.push(e))},!0),e.addEventListener("keydown",function(){t=clearTimeout(t)||setTimeout(function(){t=0},100)},!0)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=new XMLHttpRequest;return a.addEventListener("readystatechange",function(){4===a.readyState&&(200===a.status?t(a.responseText):n())}),a.open("GET",e),a.send(),a}function l(e){function n(e){var n=e.$imgWrapper,a=e.id,r=e.imgDef,i=e.imgClass,o=e.imgWidth,s=e.imgHeight;n.appendChild(t("img",{id:a,src:r,class:i,style:(o?"width:"+o+"px":"")+"; "+(s?"height:"+s+"px":"")}))}var a=e.imgDef,r=void 0===a?"":a,i=e.imgClass,o=void 0===i?"":i,l=e.imgWidth,d=e.imgHeight,c=e.viewBox,u=e.id,h=e.$targetElm,f=t("span"),m={class:o,role:"presentation"};if(l&&d&&(m.width=l,m.height=d),c&&(m.viewBox=c),u&&(m.id=u),"string"==typeof r)r.indexOf(".svg")===r.length-4?s(r,function(e){f.innerHTML=e,t(f.firstElementChild,m)},function(){n({$imgWrapper:f,id:u,imgDef:r,imgClass:o,imgWidth:l,imgHeight:d})}):n({$imgWrapper:f,id:u,imgDef:r,imgClass:o,imgWidth:l,imgHeight:d});else{var g=t(document.createElementNS("http://www.w3.org/2000/svg","svg"),m,t.apply(void 0,[document.createDocumentFragment()].concat(p(r.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})})))));f.appendChild(g)}return h&&(h.innerHTML="",h.appendChild(f)),f}function d(e){var t=e.targetElm,n=e.menuData;document.querySelector(t).classList.add("esri-header-barrier");var a=_(n.header);document.querySelector(t).appendChild(a)}function c(e){var t=e.targetElm,n=e.menuData;document.querySelector(t).classList.add("esri-footer-barrier");var a=W(n.footer);document.querySelector(t).appendChild(a)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=(function(){function e(e){this.value=e}function t(t){function n(r,i){try{var o=t[r](i),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){n("next",e)},function(e){n("throw",e)}):a(o.done?"return":"normal",o.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(e,t){return new Promise(function(a,o){var s={key:e,arg:t,resolve:a,reject:o,next:null};i?i=i.next=s:(r=i=s,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}),h="esri-header-account",f=function(){var e=t("div",{class:h}),a=document.createTextNode(""),r=t("button",{class:h+"-control "+h+"-control--signin"},a);r.addEventListener("click",function(e){i(r,"header:click:signin",{event:e})});var o=t("span"),s=document.createTextNode(""),d=t("span",{class:h+"-name"},s),c=document.createTextNode(""),u=t("span",{class:h+"-id"},c),f=t("button",{class:h+"-control "+h+"-control--signedin",id:h+"-control",aria:{controls:h+"-menu",expanded:!1,haspopup:!0}},o,d,u);f.addEventListener("click",function(t){i(f,"header:click:account",{event:t}),i(f,"header:menu:toggle",{account:!0,control:f,content:_,state:"menu",target:e,type:"account-toggle"})});var m=document.createTextNode(""),g=t("button",{class:h+"-content-toggle"},m);g.addEventListener("click",function(){i(g,"header:menu:close",{control:f,content:_,type:"account-close"})});var v=t("span"),b=document.createTextNode(""),y=document.createTextNode(""),E=document.createTextNode(""),w=t("div",{class:h+"-content-info"},v,t("span",{class:h+"-content-name"},b),t("span",{class:h+"-content-id"},y),t("span",{class:h+"-content-group"},E)),C=t("ul",{class:h+"-content-menu",role:"navigation",aria:{labelledby:h+"-control"}}),x=document.createTextNode(""),L=t("button",{class:h+"-signin-control -switch"},x);L.addEventListener("click",function(e){i(L,"header:click:switch",{event:e})});var D=document.createTextNode(""),A=t("button",{class:h+"-signin-control -logout"},D);A.addEventListener("click",function(e){i(A,"header:click:signout",{event:e})});var k=t("ul",{class:h+"-signin-menu",role:"group"},t("li",{class:h+"-signin-item"},L),t("li",{class:h+"-signin-item"},A)),_=t("div",{class:h+"-menu",id:h+"-menu",role:"group",aria:{expanded:!1,hidden:!0}},g,w,C,k);return e.addEventListener("header:update:account",function(i){var d=i.detail;t(f,{aria:{label:d.label}}),m.nodeValue=d.label,a.nodeValue=d.controls.signin,x.nodeValue=d.controls.switch,D.nodeValue=d.controls.signout,d.user?(s.nodeValue=b.nodeValue=d.user.name,c.nodeValue=y.nodeValue=d.user.id,E.nodeValue=d.user.group,l({imgDef:d.user.image,imgClass:h+"-image",$targetElm:o}),l({imgDef:d.user.image,imgClass:h+"-content-image",$targetElm:v}),n.apply(void 0,[C].concat(p(d.menus.map(function(e){return t("li",{class:h+"-content-item"},t("a",{class:h+"-content-link",href:e.href},e.label))})))),n(e,f,_)):n(e,r)}),e},m="esri-header-brand",g=function(){var e=t("a",{class:m,id:m});return e.addEventListener("click",function(t){i(e,"header:click:brand",{event:t})}),e.addEventListener("header:update:brand",function(n){var a=n.detail;if(t(e,{href:a.href}),a.distributorImage){var r=t("span",{class:"distributor-image"});l({imgDef:a.distributorImage,imgClass:m+"-image",imgWidth:a.distributorImageWidth,imgHeight:a.distributorImageHeight,$targetElm:r}),t(e,r,t("span",{class:"distributor-image-border"}))}if(a.image){var i=t("span",{class:"brand-image"});t(e,{aria:{label:a.label}}),l({imgDef:a.image,imgClass:m+"-image",imgWidth:a.width,imgHeight:a.height,$targetElm:i}),t(e,i)}if(a.brandText){var o=t("span",{class:a.image?m+"-text -has-image":m+"-text"},a.brandText);t(e,o)}}),e},v="esri-header-branding-stripe",b=function(){var e=t("div",{class:v,id:v});return e.addEventListener("header:update:brand",function(t){var n=t.detail;e.style.backgroundColor=n.topStripe,e.classList.add("-visible")}),e},y="esri-header-menus",E=function(e){var a=e.variant,r=void 0===a?"desktop":a,o=t("div",{class:y,id:y+"-"+r});if(o.classList.add("-"+r),"mobile"===r){var s=t("button",{class:y+"-toggle",id:y+"-"+r+"-toggle",aria:{controls:y+"-content",expanded:!1,haspopup:!0,labelledby:"esri-header-brand"}});s.addEventListener("click",function(e){i(s,"header:menu:toggle",{control:s,content:d,root:!0,state:"menu",target:o,type:"root-toggle",event:e})}),t(o,s)}var d=t("div",{class:y+"-content",aria:{hidden:!0,expanded:!1}});return t(o,d),o.addEventListener("header:update:menus",function(e){var a=e.detail;n.apply(void 0,[d].concat(p(a.map(function(e,n){return t("div",{class:y+"-menu",role:"group"},t.apply(void 0,["ul",{class:y+"-list",role:"navigation",aria:{labelledby:"esri-header-brand"}}].concat(p(e.map(function(e,a){var o=e.icon?l({imgDef:e.icon.path,imgClass:y+"-link-icon",imgWidth:e.icon.width||"16px",imgHeight:e.icon.height||"16px"}):null,s=t("a",{class:y+"-link "+(e.hideLabelInDesktop?"-hide-label":""),id:y+"-link-"+n+"-"+a,href:e.href||"javascript:;"},o,t("span",{class:y+"-link-label"},e.label));e.data&&s({data:e.data});var d=t("li",{class:y+"-item"},s),c=e.menus&&e.menus.length,u=e.tiles&&e.tiles.length;if(c||u){var h=t("button",{class:y+"-submenu-toggle"},e.label),f=t("div",{class:y+"-submenu",id:y+"-"+r+"-submenu-"+n+"-"+a,role:"group",aria:{hidden:!0,expanded:!1},data:{filled:e.menus&&e.menus.length>10?e.menus.slice(0,18).length:""}},h);c&&t(f,t.apply(void 0,["ul",{class:y+"-sublist",role:"navigation",aria:{labelledby:y+"-"+r+"-link-"+n+"-"+a}}].concat(p(e.menus.slice(0,18).map(function(e){var n=t("a",{class:y+"-sublink",href:e.href},e.label);return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:y+"-subitem"},n)}))))),u&&t(f,t.apply(void 0,["ul",{class:y+"-sublist--featured",role:"navigation",aria:{labelledby:y+"-link-"+n+"-"+a},data:{filled:""+e.tiles.slice(0,4).length}}].concat(p(e.tiles.slice(0,4).map(function(e){var n=t("a",{class:y+"-sublink--featured",href:e.href},l({imgDef:e.icon,imgClass:y+"-sublink-image",imgWidth:e.width,imgHeight:e.height}),t("span",{class:y+"-sublink-text"},e.label));return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:y+"-subitem--featured"},n)}))))),t(d,f),s.addEventListener("click",function(){i(s,"header:menu:toggle",{control:s,content:f,submenu:!0,state:"menu",type:"menu-toggle"})}),h.addEventListener("click",function(){i(h,"header:menu:close",{control:s,submenu:!0,content:f,type:"menu-close"})})}return d})))))}))))}),o.addEventListener("header:update:collapseMenus",function(e){var t=e.detail;if(t&&t.indexOf(!0)>-1){document.querySelector(".esri-header-menus-toggle").classList.add("-visible"),document.getElementById("esri-header-brand").classList.add("-fit-burger"),document.getElementById("esri-header-menus-mobile").classList.add("-always-visible");var n=[].slice.call(o.querySelectorAll(".esri-header-menus-menu"));t.forEach(function(e,t){e&&n[t].classList.add("-collapsed")})}}),o},w=function(e){function n(n){n&&"reset"===n.type&&(o.value="");var a=o.value;a!==h&&(h=a,i(u,e.prefix+":input",{value:h,event:n})),p&&!a?(p=!1,r.removeAttribute("data-filled"),c.removeAttribute("data-filled")):!p&&a&&(p=!0,t(r,{data:{filled:""}}),t(c,{data:{filled:""}})),s.nodeValue=a;var f=l.scrollWidth+"px";d.style.width=f}function a(t){i(u,e.prefix+":submit",{value:o.value,event:t})}var r=t("label",{class:e.prefix+"-label",for:e.prefix+"-query-control"},e.queryLabel),o=t("input",{class:e.prefix+"-control",id:e.prefix+"-control",type:"search",name:"q",autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:"false"}),s=document.createTextNode(""),l=t("div",{class:e.prefix+"-measure-text",aria:{hidden:!0}},s),d=t("div",{class:e.prefix+"-measure"},l),c=t("button",{class:e.prefix+"-submit",type:"submit",aria:{label:e.submitLabel}}),u=t("form",{class:e.prefix+"-form",action:e.action,role:"search",aria:{label:e.label}},r,o,d,c);u.addEventListener(e.prefix+":focus",function(){o.focus()});var p=!1,h="";return u.addEventListener("DOMNodeInserted",function t(){u.parentNode&&(u.removeEventListener("DOMNodeInserted",t),i(u,e.prefix+":update",e))}),u.addEventListener(e.prefix+":update",function(){u.ownerDocument.defaultView.matchMedia(e.matchMedia||"(max-width: 720px)").addListener(n),o.addEventListener("input",n),u.addEventListener("reset",n),u.addEventListener("submit",a),u.addEventListener(e.prefix+":unload",onunload)}),u},C="esri-header-search",x=function(){var e=t("button",{class:C+"-control",id:C+"-control",aria:{expanded:!1,controls:C+"-content"}});e.addEventListener("click",function(t){i(e,"header:click:search",{event:t}),i(e,"header:menu:toggle",{control:e,content:a,state:"search",target:r,type:"search-toggle",event:t})});var a=t("div",{class:C+"-content",id:C+"-content",aria:{expanded:!1,labelledby:C+"-control"}}),r=t("div",{class:C},e,a);return r.addEventListener("header:update:search",function(r){var o=r.detail;if(!o.hide&&(t(e,{aria:{label:o.label}}),l({imgDef:o.image,imgClass:C+"-image",id:C+"-image",$targetElm:e}),o.dialog)){o.dialog.prefix="esri-header-search-dialog";var s=w(o.dialog),d=t("button",{class:"esri-header-search-dialog-cancel",type:"reset"},t("span",o.dialog.cancelLabel));d.addEventListener("click",function(t){i(e,"header:menu:close",{control:e,content:a,state:"search",type:"search-close",event:t})}),t(s,d),n(a,s),e.addEventListener("click",function(t){"true"===e.getAttribute("aria-expanded")&&i(s,o.dialog.prefix+":focus",{event:t})})}}),r},L=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(t){e.exports=t()}(function(){function e(t,n){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=n=E({},n),t[z]=this;var a={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==e.supportPointer};for(var r in a)!(r in n)&&(n[r]=a[r]);ue(n);for(var o in this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!n.forceFallback&&ae,i(t,"mousedown",this._onTapStart),i(t,"touchstart",this._onTapStart),n.supportPointer&&i(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(i(t,"dragover",this),i(t,"dragenter",this)),de.push(this._onDragOver),n.store&&this.sort(n.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),_&&_.state!==t&&(l(_,"display",t?"none":""),t||_.state&&(e.options.group.revertClone?(T.insertBefore(_,S),e._animate(D,_)):T.insertBefore(_,D)),_.state=t)}function n(e,t,n){if(e){n=n||Q;do{if(">*"===t&&e.parentNode===n||b(e,t))return e}while(e=a(e))}return null}function a(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function r(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function i(e,t,n){e.addEventListener(t,n,te)}function o(e,t,n){e.removeEventListener(t,n,te)}function s(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(U," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(U," ")}}function l(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return Q.defaultView&&Q.defaultView.getComputedStyle?n=Q.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function d(e,t,n){if(e){var a=e.getElementsByTagName(t),r=0,i=a.length;if(n)for(;r<i;r++)n(a[r],r);return a}return[]}function c(e,t,n,a,r,i,o,s){e=e||t[z];var l=Q.createEvent("Event"),d=e.options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);l.initEvent(n,!0,!0),l.to=r||t,l.from=i||t,l.item=a||t,l.clone=_,l.oldIndex=o,l.newIndex=s,t.dispatchEvent(l),d[c]&&d[c].call(e,l)}function p(e,t,n,a,r,i,o,s){var l,d,c=e[z],u=c.options.onMove;return(l=Q.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=n,l.draggedRect=a,l.related=r||t,l.relatedRect=i||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function h(e){e.draggable=!1}function f(){ie=!1}function m(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}function g(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function v(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!b(e,t)||n++;return n}function b(e,t){if(e){var n=(t=t.split(".")).shift().toUpperCase(),a=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(a)||[]).length!=t.length)}return!1}function y(e,t){var n,a;return function(){void 0===n&&(n=arguments,a=this,J(function(){1===n.length?e.call(a,n[0]):e.apply(a,n),n=void 0},t))}}function E(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function w(e){return ee&&ee.dom?ee.dom(e).cloneNode(!0):K?K(e).clone(!0)[0]:e.cloneNode(!0)}function C(e){for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&le.push(a)}}function x(e){return J(e,0)}function L(e){return clearTimeout(e)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var D,A,k,_,T,S,N,M,I,O,W,B,H,R,P,Y,V,X,F,q,j={},U=/\s+/g,$=/left|right|inline/,z="Sortable"+(new Date).getTime(),G=window,Q=G.document,Z=G.parseInt,J=G.setTimeout,K=G.jQuery||G.Zepto,ee=G.Polymer,te=!1,ne=!1,ae="draggable"in Q.createElement("div"),re=function(e){return!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&(e=Q.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),ie=!1,oe=Math.abs,se=Math.min,le=[],de=[],ce=y(function(e,t,n){if(n&&t.scroll){var a,r,i,o,s,l,d=n[z],c=t.scrollSensitivity,u=t.scrollSpeed,p=e.clientX,h=e.clientY,f=window.innerWidth,m=window.innerHeight;if(I!==n&&(M=t.scroll,I=n,O=t.scrollFn,!0===M)){M=n;do{if(M.offsetWidth<M.scrollWidth||M.offsetHeight<M.scrollHeight)break}while(M=M.parentNode)}M&&(a=M,r=M.getBoundingClientRect(),i=(oe(r.right-p)<=c)-(oe(r.left-p)<=c),o=(oe(r.bottom-h)<=c)-(oe(r.top-h)<=c)),i||o||(o=(m-h<=c)-(h<=c),((i=(f-p<=c)-(p<=c))||o)&&(a=G)),j.vx===i&&j.vy===o&&j.el===a||(j.el=a,j.vx=i,j.vy=o,clearInterval(j.pid),a&&(j.pid=setInterval(function(){if(l=o?o*u:0,s=i?i*u:0,"function"==typeof O)return O.call(d,s,l,e);a===G?G.scrollTo(G.pageXOffset+s,G.pageYOffset+l):(a.scrollTop+=l,a.scrollLeft+=s)},24)))}},30),ue=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=n.name),"function"==typeof e?e:function(n,a){var r=a.options.group.name;return t?e:e&&(e.join?e.indexOf(r)>-1:r==e)}}var n={},a=e.group;a&&"object"==(void 0===a?"undefined":u(a))||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){te={capture:!1,passive:ne=!1}}}))}catch(e){}return e.prototype={constructor:e,_onTapStart:function(e){var t,a=this,r=this.el,i=this.options,o=i.preventOnFilter,s=e.type,l=e.touches&&e.touches[0],d=(l||e).target,u=e.target.shadowRoot&&e.path&&e.path[0]||d,p=i.filter;if(C(r),!D&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||i.disabled)&&!u.isContentEditable&&(d=n(d,i.draggable,r))&&N!==d){if(t=v(d,i.draggable),"function"==typeof p){if(p.call(this,e,d,this))return c(a,u,"filter",d,r,r,t),void(o&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=n(u,e.trim(),r))return c(a,e,"filter",d,r,r,t),!0})))return void(o&&e.preventDefault());i.handle&&!n(u,i.handle,r)||this._prepareDragStart(e,l,d,t)}},_prepareDragStart:function(e,t,n,a){var r,o=this,l=o.el,u=o.options,p=l.ownerDocument;n&&!D&&n.parentNode===l&&(X=e,T=l,A=(D=n).parentNode,S=D.nextSibling,N=n,Y=u.group,R=a,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,D.style["will-change"]="all",r=function(){o._disableDelayedDrag(),D.draggable=o.nativeDraggable,s(D,u.chosenClass,!0),o._triggerDragStart(e,t),c(o,T,"choose",D,T,T,R)},u.ignore.split(",").forEach(function(e){d(D,e.trim(),h)}),i(p,"mouseup",o._onDrop),i(p,"touchend",o._onDrop),i(p,"touchcancel",o._onDrop),i(p,"selectstart",o),u.supportPointer&&i(p,"pointercancel",o._onDrop),u.delay?(i(p,"mouseup",o._disableDelayedDrag),i(p,"touchend",o._disableDelayedDrag),i(p,"touchcancel",o._disableDelayedDrag),i(p,"mousemove",o._disableDelayedDrag),i(p,"touchmove",o._disableDelayedDrag),u.supportPointer&&i(p,"pointermove",o._disableDelayedDrag),o._dragStartTimer=J(r,u.delay)):r())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._disableDelayedDrag),o(e,"touchmove",this._disableDelayedDrag),o(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){(t=t||("touch"==e.pointerType?e:null))?(X={target:D,clientX:t.clientX,clientY:t.clientY},this._onDragStart(X,"touch")):this.nativeDraggable?(i(D,"dragend",this),i(T,"dragstart",this._onDragStart)):this._onDragStart(X,!0);try{Q.selection?x(function(){Q.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(T&&D){var t=this.options;s(D,t.ghostClass,!0),s(D,t.dragClass,!1),e.active=this,c(this,T,"start",D,T,T,R)}else this._nulling()},_emulateDragOver:function(){if(F){if(this._lastX===F.clientX&&this._lastY===F.clientY)return;this._lastX=F.clientX,this._lastY=F.clientY,re||l(k,"display","none");var e=Q.elementFromPoint(F.clientX,F.clientY),t=e,n=de.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(F.clientX,F.clientY)),t)do{if(t[z]){for(;n--;)de[n]({clientX:F.clientX,clientY:F.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);re||l(k,"display","")}},_onTouchMove:function(t){if(X){var n=this.options,a=n.fallbackTolerance,r=n.fallbackOffset,i=t.touches?t.touches[0]:t,o=i.clientX-X.clientX+r.x,s=i.clientY-X.clientY+r.y,d=t.touches?"translate3d("+o+"px,"+s+"px,0)":"translate("+o+"px,"+s+"px)";if(!e.active){if(a&&se(oe(i.clientX-this._lastX),oe(i.clientY-this._lastY))<a)return;this._dragStarted()}this._appendGhost(),q=!0,F=i,l(k,"webkitTransform",d),l(k,"mozTransform",d),l(k,"msTransform",d),l(k,"transform",d),t.preventDefault()}},_appendGhost:function(){if(!k){var e,t=D.getBoundingClientRect(),n=l(D),a=this.options;s(k=D.cloneNode(!0),a.ghostClass,!1),s(k,a.fallbackClass,!0),s(k,a.dragClass,!0),l(k,"top",t.top-Z(n.marginTop,10)),l(k,"left",t.left-Z(n.marginLeft,10)),l(k,"width",t.width),l(k,"height",t.height),l(k,"opacity","0.8"),l(k,"position","fixed"),l(k,"zIndex","100000"),l(k,"pointerEvents","none"),a.fallbackOnBody&&Q.body.appendChild(k)||T.appendChild(k),e=k.getBoundingClientRect(),l(k,"width",2*t.width-e.width),l(k,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,r=n.options;n._offUpEvents(),Y.checkPull(n,n,D,e)&&((_=w(D)).draggable=!1,_.style["will-change"]="",l(_,"display","none"),s(_,n.options.chosenClass,!1),n._cloneId=x(function(){T.insertBefore(_,D),c(n,T,"clone",D)})),s(D,r.dragClass,!0),t?("touch"===t?(i(Q,"touchmove",n._onTouchMove),i(Q,"touchend",n._onDrop),i(Q,"touchcancel",n._onDrop),r.supportPointer&&(i(Q,"pointermove",n._onTouchMove),i(Q,"pointerup",n._onDrop))):(i(Q,"mousemove",n._onTouchMove),i(Q,"mouseup",n._onDrop)),n._loopId=setInterval(n._emulateDragOver,50)):(a&&(a.effectAllowed="move",r.setData&&r.setData.call(n,a,D)),i(Q,"drop",n),n._dragStartId=x(n._dragStarted))},_onDragOver:function(a){var r,i,o,s,d=this.el,c=this.options,u=c.group,h=e.active,g=Y===u,v=!1,b=c.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!c.dragoverBubble&&a.stopPropagation()),!D.animated&&(q=!0,h&&!c.disabled&&(g?b||(s=!T.contains(D)):V===this||(h.lastPullMode=Y.checkPull(this,h,D,a))&&u.checkPut(this,h,D,a))&&(void 0===a.rootEl||a.rootEl===this.el))){if(ce(a,c,this.el),ie)return;if(r=n(a.target,c.draggable,d),i=D.getBoundingClientRect(),V!==this&&(V=this,v=!0),s)return t(h,!0),A=T,void(_||S?T.insertBefore(D,_||S):b||T.appendChild(D));if(0===d.children.length||d.children[0]===k||d===a.target&&m(d,a)){if(0!==d.children.length&&d.children[0]!==k&&d===a.target&&(r=d.lastElementChild),r){if(r.animated)return;o=r.getBoundingClientRect()}t(h,g),!1!==p(T,d,D,i,r,o,a)&&(D.contains(d)||(d.appendChild(D),A=d),this._animate(i,D),r&&this._animate(o,r))}else if(r&&!r.animated&&r!==D&&void 0!==r.parentNode[z]){W!==r&&(W=r,B=l(r),H=l(r.parentNode));var y=(o=r.getBoundingClientRect()).right-o.left,E=o.bottom-o.top,w=$.test(B.cssFloat+B.display)||"flex"==H.display&&0===H["flex-direction"].indexOf("row"),C=r.offsetWidth>D.offsetWidth,x=r.offsetHeight>D.offsetHeight,L=(w?(a.clientX-o.left)/y:(a.clientY-o.top)/E)>.5,N=r.nextElementSibling,M=!1;if(w){var I=D.offsetTop,O=r.offsetTop;M=I===O?r.previousElementSibling===D&&!C||L&&C:r.previousElementSibling===D||D.previousElementSibling===r?(a.clientY-o.top)/E>.5:O>I}else v||(M=N!==D&&!x||L&&x);var R=p(T,d,D,i,r,o,a,M);!1!==R&&(1!==R&&-1!==R||(M=1===R),ie=!0,J(f,30),t(h,g),D.contains(d)||(M&&!N?d.appendChild(D):r.parentNode.insertBefore(D,M?N:r)),A=D.parentNode,this._animate(i,D),this._animate(o,r))}}},_animate:function(e,t){var n=this.options.animation;if(n){var a=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),l(t,"transition","none"),l(t,"transform","translate3d("+(e.left-a.left)+"px,"+(e.top-a.top)+"px,0)"),t.offsetWidth,l(t,"transition","all "+n+"ms"),l(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=J(function(){l(t,"transition",""),l(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;o(Q,"touchmove",this._onTouchMove),o(Q,"pointermove",this._onTouchMove),o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"pointerup",this._onDrop),o(e,"touchcancel",this._onDrop),o(e,"pointercancel",this._onDrop),o(e,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;clearInterval(this._loopId),clearInterval(j.pid),clearTimeout(this._dragStartTimer),L(this._cloneId),L(this._dragStartId),o(Q,"mouseover",this),o(Q,"mousemove",this._onTouchMove),this.nativeDraggable&&(o(Q,"drop",this),o(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(q&&(t.preventDefault(),!a.dropBubble&&t.stopPropagation()),k&&k.parentNode&&k.parentNode.removeChild(k),T!==A&&"clone"===e.active.lastPullMode||_&&_.parentNode&&_.parentNode.removeChild(_),D&&(this.nativeDraggable&&o(D,"dragend",this),h(D),D.style["will-change"]="",s(D,this.options.ghostClass,!1),s(D,this.options.chosenClass,!1),c(this,T,"unchoose",D,A,T,R),T!==A?(P=v(D,a.draggable))>=0&&(c(null,A,"add",D,A,T,R,P),c(this,T,"remove",D,A,T,R,P),c(null,A,"sort",D,A,T,R,P),c(this,T,"sort",D,A,T,R,P)):D.nextSibling!==S&&(P=v(D,a.draggable))>=0&&(c(this,T,"update",D,A,T,R,P),c(this,T,"sort",D,A,T,R,P)),e.active&&(null!=P&&-1!==P||(P=R),c(this,T,"end",D,A,T,R,P),this.save()))),this._nulling()},_nulling:function(){T=D=A=k=S=_=N=M=I=X=F=q=P=W=B=V=Y=e.active=null,le.forEach(function(e){e.checked=!0}),le.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":D&&(this._onDragOver(e),r(e));break;case"mouseover":this._onDrop(e);break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],a=this.el.children,r=0,i=a.length,o=this.options;r<i;r++)n(e=a[r],o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||g(e));return t},sort:function(e){var t={},a=this.el;this.toArray().forEach(function(e,r){var i=a.children[r];n(i,this.options.draggable,a)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(a.removeChild(t[e]),a.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&ue(n)},destroy:function(){var e=this.el;e[z]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),o(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),de.splice(de.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},i(Q,"touchmove",function(t){e.active&&t.preventDefault()}),e.utils={on:i,off:o,css:l,find:d,is:function(e,t){return!!n(e,t,e)},extend:E,throttle:y,closest:n,toggleClass:s,clone:w,index:v,nextTick:x,cancelNextTick:L},e.create=function(t,n){return new e(t,n)},e.version="1.7.0",e})}),D="esri-header-apps",A="rtl"===document.dir,k=function(){var e=t("div",{class:D+"-content",id:D+"-content",aria:{expanded:!1,labelledby:D+"-control"}}),a=t("span",{title:"App Launcher","aria-label":"App Launcher Icon"}),o=t("button",{class:D+"-control empty-padding",id:D+"-control"},a),s=function(t){O(),W(),h.showMoreButton.classList.remove("hide"),u.setAttribute("aria-expanded","false"),i(d,"header:menu:toggle",{state:"menu",target:c,type:"root-toggle",control:d,content:e,event:t})},d=o;o.addEventListener("click",s);var c=t("div",{class:D},d),u=t("div",{class:D+" secondary-dropdown-menu",aria:{expanded:!1}},t("hr")),p=t("div",{class:D+" bottom-container"}),h={maxDragErrorTollerance:1},f={DOWN_ARROW:40,UP_ARROW:38,RIGHT_ARROW:39,LEFT_ARROW:37,SPACE:32},m=function(e,n){var a=["0px","32px","24px","20px","18px","16px","14px"],r=h.browserIsEdge?"user-select-none":"",i=t("li",{alt:"",class:"block link-off-black appLinkContainer grabbable "+(n.canAccess?"with-hover":"no-hover"),mousedown:C.bind(null,n),keyup:Y.bind(null,n),keydown:F,role:"menuitem","data-id":n.itemId});if(n.canAccess){n.isNew&&i.appendChild(t("div",{class:"app-indicator app-indicator-new"}));var o=t("a",{href:n.url,target:"_blank",blur:V.bind(null,n),class:"appLink"});if(n.image){var s=t("div",{class:"appIconImage "+r});s.appendChild(Q()),s.appendChild(t("img",{class:"appIconPng",alt:"",src:n.image})),o.appendChild(s)}else{var l=Math.round(E(n.abbr||"","avenir")/5),d=a[l];l>6&&(n.abbr=n.abbr.substr(0,4),d=a[4]);var c=t("div",{class:"appIconImage"});c.appendChild(Q());var u=t("span",{style:"font-size: "+d,class:"avenir appIconSvgText "+r},n.abbr);c.appendChild(u),c.appendChild(t("img",{src:n.placeHolderIcon,alt:"",class:r})),o.appendChild(c)}i.appendChild(o);var p=t("p",{style:"margin:0 auto; text-align:center",class:r},n.label);o.appendChild(p)}else g(n,i,r);e.appendChild(i)},g=function(e,n,a){var r=t("div",{class:"app-indicator app-indicator-removed",tabindex:0,click:_.bind(null,e.uid,n),keyup:_.bind(null,e.uid,n),keydown:F});r.innerHTML=w();var i=t("div",{class:"missing-app-icon appIconImage",tabindex:0,blur:V.bind(null,e),title:h.i18n.removed,keyup:T.bind(null,e.uid,n),onclick:T.bind(null,e.uid,n)});i.appendChild(Q()),n.appendChild(r),n.appendChild(i),n.appendChild(t("p",{style:"margin:0 auto; text-align:center",class:a},e.label))},v=function(e,t,n){i(d,"header:apps:reorder",{icons:{primaryApps:e,secondaryApps:t,revisions:n||{}}})},b=function(){u.setAttribute("aria-expanded","true"),h.showMoreButton.classList.add("hide")},y=function(e){e===h.bottomAppContainer&&1===h.secondarySortable.toArray().length?N(!1):h.secondarySortable.toArray().length||N(!0)},E=function e(t,n){var a=(e.canvas||(e.canvas=document.createElement("canvas"))).getContext("2d");return a.font=n,a.measureText(t).width},w=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 32 32"><path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/></svg>'},C=function(e,t){if(0===t.button){if(h.startClientX=t.clientX,h.startClientY=t.clientY,h.startApp=e,h.dragEventWasCanceled=!1,h.startElement=t.currentTarget,h.disabled)return void(e.canAccess&&h.dropdownNav.addEventListener("mouseup",x));if(setTimeout(function(e){h.startElement.classList.remove("sortable-drag-class")},1),e.isNew){var n=h.primarySortable.toArray();h.duplicateValueIndex&&n.splice(h.duplicateValueIndex,1),v(n,h.secondarySortable.toArray(),{targetUid:t.currentTarget.getAttribute("data-id"),isNew:!0,targetValue:null}),t.currentTarget.classList.remove("sortable-drag-class")}else t.currentTarget.classList.remove("sortable-drag-class");if(h.listenForMouseOverElement=t.currentTarget.parentNode,h.listenForMouseOverElement.addEventListener("mousemove",B),e.canAccess)h.dropdownNav.addEventListener("mouseup",s);else{h.dropdownNav.addEventListener("mouseup",S);var a="app-indicator app-indicator-removed";t.target.classList.className!==a&&t.target.parentNode.className!==a&&t.target.parentNode.parentNode.className!==a||(h.removeStartApp=!0)}}},x=function e(t){h.dropdownNav.removeEventListener("mouseup",e,!1),R(t.clientX,t.clientY)||s()},k=function(e,t,n){!h.disabled&&e&&(e.canAccess?(s(),window.open(e.url,"_blank")):n?(h.removeStartApp=!1,_(e.itemId||e.title,t)):T(e.itemId||e.title,t))},_=function(e,t,n){n&&!P(n.keyCode)||(r(t),setTimeout(function(){v(h.primarySortable.toArray(),h.secondarySortable.toArray())},0))},T=function(e,t,n){h.dropdownWrapper.classList.remove("dragging"),h.removedAppWithFoucs||n&&!P(n.keyCode)?h.removedAppWithFoucs=null:h.removedAppWithFoucs={uid:e,el:t}},S=function(e){h.dragEventWasCanceled=!0},N=function(e){h.bottomAppContainer.classList[e?"add":"remove"]("drag-apps-here-box"),h.dragAppsHereText.classList[e?"remove":"add"]("hide")},M=function(e,t){var n=e.item.children[1]&&"A"===e.item.children[1].nodeName?e.item.children[1]:e.item.children[0];t?(h.recentlyRemovedHref=n.href,n.removeAttribute("href")):setTimeout(function(){n.href=h.recentlyRemovedHref},1)},I=function(e){h.dragAndDropIntro.classList.add("hide"),v(h.primarySortable.toArray(),h.secondarySortable.toArray())},O=function(){h.dropdownNav&&h.dropdownNav.removeEventListener&&h.dropdownNav.removeEventListener("mouseup",s,!1)},W=function(){h.listenForMouseOverElement&&h.listenForMouseOverElement.removeEventListener("mousemove",B,!1)},B=function(e){R(e.clientX,e.clientY)&&(h.simulatedDragEvent=!0,h.dropdownWrapper.classList.add("dragging"),W())},H=function(e){"edge"===e?h.browserIsEdge=!0:"ie11"===e&&(te.ghostClass="sortable-ghost-class-with-pointer-events",ne.ghostClass="sortable-ghost-class-with-pointer-events")},R=function(e,t){return!h.dragEventWasCanceled&&(Math.abs(e-h.startClientX)>h.maxDragErrorTollerance||Math.abs(t-h.startClientY)>h.maxDragErrorTollerance)},P=function(e){return!e||13===e},Y=function(e,t){if("app-indicator app-indicator-removed"!==t.target.className&&t.keyCode===f.SPACE){if(h.activeAccessibleListElement)return V(e,t);var n=e.canAccess?t.target.firstChild.firstChild:t.target.firstChild,a=t.target.parentNode,r=a.parentNode,i=G(a),o=h.primarySortable.toArray().length;b();var s=z(i,r,o);h.activeAccessibleListElement=a,h.activeAccessibleListElementEvent=q.bind(null,e,ee(s,r),a,r,i),a.addEventListener("keydown",h.activeAccessibleListElementEvent),Z(n,i,r,o)}return!1},V=function(e,t){var n=t.target||t,a=e.canAccess?n.firstChild.firstChild:n.firstChild;a.classList.remove("arrow-keys-enabled"),a.classList.add("arrow-keys-disabled"),h.activeAccessibleListElement&&(h.activeAccessibleListElement.removeEventListener("keydown",h.activeAccessibleListElementEvent,!1),h.activeAccessibleListElement=null)},X=function(e){return e.keyCode===f.DOWN_ARROW?"bottom":e.keyCode===f.UP_ARROW?"top":e.keyCode===f.RIGHT_ARROW?A?"left":"right":e.keyCode===f.LEFT_ARROW?A?"right":"left":void 0},F=function(e){e.keyCode!==f.SPACE&&e.keyCode!==f.DOWN_ARROW&&e.keyCode!==f.UP_ARROW||e.preventDefault()},q=function(e,t,n,a,r,i){var o=X(i);"bottom"===o&&t.indexOf("bottom")>-1&&j(n,r,a,3,e,i),"top"===o&&t.indexOf("top")>-1&&j(n,r,a,-3,e,i),"right"===o&&t.indexOf("right")>-1&&j(n,r,a,1,e,i),"left"===o&&t.indexOf("left")>-1&&j(n,r,a,-1,e,i)},j=function(e,t,n,a,r,i){var o=t+a,s=n===h.bottomAppContainer?n.children.length-1:n.children.length,l=n===h.topAppContainer;if(l&&o<s||!l&&o<=s&&o>0){var d=a<0?n.children[o]:n.children[o].nextSibling;n.insertBefore(e,d)}else l?($(e,t,a),y(h.bottomAppContainer)):(U(e,t,a),y(h.topAppContainer));V(r,i),r.canAccess&&!r.isNew?e.children[0].focus():e.children[1].focus(),setTimeout(function(){r.isNew?v(h.primarySortable.toArray(),h.secondarySortable.toArray(),{targetUid:r.itemId||r.title,isNew:!0,targetValue:null}):v(h.primarySortable.toArray(),h.secondarySortable.toArray())},0)},U=function(e,t,n){var a=h.topAppContainer,r=t%3||3,i=o%3||3,o=h.topAppContainer.children.length;return 1===Math.abs(n)||3===i?a.appendChild(e):2===r&&i>1?a.insertBefore(e,a.children[o-(i-1)]):1===r&&o?a.insertBefore(e,a.children[o-i]):void a.appendChild(e)},$=function(e,t,n){var a=h.bottomAppContainer,r=h.bottomAppContainer.children.length-1,i=(t+1)%3||3;return r?1===Math.abs(n)?a.insertBefore(e,a.children[1]):2===i&&r>1?a.insertBefore(e,a.children[2]):3===i&&2===r?a.insertBefore(e,a.children[3]):void a.insertBefore(e,a.children[1]):a.appendChild(e)},z=function(e,t,n){return e+(t===h.bottomAppContainer?n+1:1)},G=function(e){var t=e.parentNode;return Array.prototype.indexOf.call(t.children,e)},Q=function(){return t("span",{class:"arrow-keys-disabled"})},Z=function(e,t,n,a){e.classList.add("arrow-keys-enabled"),e.classList.remove("arrow-keys-disabled");var r=z(t,n,a);e.innerHTML=J(ee(r,n),n)},J=function(e){return e.reduce(function(e,t){return e+K(t)},"")},K=function(e){return'<div class="app-arrow app-arrow-'+e+'"></div>'},ee=function(e,t){var n=[],a=h.topAppContainer.children.length,r=h.bottomAppContainer.children.length,i=a+r;return e-1>0&&n.push("left"),(e+1<=i||!r)&&e!==a&&n.push("right"),e-3>0&&n.push("top"),(e-a+2<r||t===h.topAppContainer)&&n.push("bottom"),n},te={group:"Apps",sort:!0,disabled:!1,animation:150,forceFallback:!0,delay:0,fallbackTolerance:0,ghostClass:"sortable-ghost-class",dragClass:"sortable-drag-class",onStart:function(e){h.dragAppsHereText.classList.add("hide"),O(),M(e,!0)},onEnd:function(e){return e.preventDefault(),W(),M(e,!1),h.dropdownWrapper.classList.remove("dragging"),h.bottomAppContainer.classList.remove("on-drag-over"),h.secondarySortable.toArray().length&&N(!1),!1},onMove:function(e,t){e.to===h.bottomAppContainer?h.bottomAppContainer.classList.add("on-drag-over"):h.bottomAppContainer.classList.remove("on-drag-over")},store:{get:function(e){return e.options.group.name&&e.options.group.name.split("!")||[]},set:function(e){h.simulatedDragEvent?v(e.toArray(),h.secondarySortable.toArray()):k(h.startApp,h.startElement,h.removeStartApp),h.startElement&&h.startElement.classList.remove("sortable-drag-class"),h.simulatedDragEvent=!1}}},ne={group:"Apps",sort:!0,disabled:!1,animation:150,forceFallback:!0,delay:0,fallbackTolerance:0,ghostClass:"sortable-ghost-class",dragClass:"sortable-drag-class",onStart:function(e){O(),M(e,!0)},onEnd:function(e){e.preventDefault(),W(),M(e,!1),h.dropdownWrapper.classList.remove("dragging"),h.secondarySortable.toArray().length||N(!0)},store:{get:function(e){return e.options.group.name&&e.options.group.name.split("!")||[]},set:function(e){h.simulatedDragEvent?v(h.primarySortable.toArray(),e.toArray()):k(h.startApp,h.startElement,h.removeStartApp),h.startElement&&h.startElement.classList.remove("sortable-drag-class"),h.simulatedDragEvent=!1}}};return c.addEventListener("header:update:apps",function(r){var i=r.detail;l({imgDef:i.image.path,imgWidth:i.image.width,imgHeight:i.image.height,"shape-rendering":"crispEdges",imgClass:D+" svg-grid-icon",$targetElm:a});if(i.primary)if(i.ieVersion&&H(i.ieVersion),i.disableDragAndDrop&&(h.disabled=!0),i.text&&(h.i18n=i.text||{}),i.isLoading)d.className=D+"-control disabled-grid-icon",d.removeEventListener("click",s,!1),n(c,d);else{c.appendChild(e),d.className=D+"-control",t(d,{aria:{label:i.label}});var o=i.primary.length,f=" dropdown-width-"+(o<3?o:3);h.topAppContainer=t("ul",{class:D+" appContainer primary",role:"menu"}),h.bottomAppContainer=t("ul",{class:D+" appContainer secondary",role:"menu"}),h.disabled||(h.dragAppsHereText=t("p",{class:"hide"},h.i18n.dragAppsHere),h.bottomAppContainer.appendChild(h.dragAppsHereText),i.secondary.length||N(!0),h.primarySortable=L.create(h.topAppContainer,te),h.secondarySortable=L.create(h.bottomAppContainer,ne)),i.primary.forEach(function(e,t){m(h.topAppContainer,e)}),i.secondary.forEach(function(e,t){m(h.bottomAppContainer,e)}),p.appendChild(h.bottomAppContainer),u.appendChild(p);var g=t("div",{class:"dropdown"}),v=t("p",{class:D+" drag-and-drop-intro"},h.i18n.intro),y=t("button",{class:D+" dismiss-intro-button",click:I},h.i18n.confirm);h.dragAndDropIntro=i.displayIntro?t("div",{class:D+" intro-container"},v,y):"";var E=t("span");E.innerHTML=' <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 32 32" class="down-carrot-svg js-prevent-dropdown__app-switcher"><path d="M28 9v5L16 26 4 14V9l12 12L28 9z"></path></svg>',h.showMoreButton=t("button",{class:D+" show-more-button",click:b},h.i18n.showMore,E),h.dropdownWrapper=t("div",{},h.dragAndDropIntro,h.topAppContainer,h.showMoreButton,u),h.dropdownNav=t("nav",{class:D+" dropdown-menu dropdown-right app-switcher-dropdown-menu "+f,role:"menu"},h.dropdownWrapper),g.appendChild(h.dropdownNav),e.appendChild(g),n(c,d,e)}}),c},_=function(e){var a=void 0,r=void 0,s=t("button",{class:"esri-header-canvas",tabindex:"-1",data:{open:!1}});s.addEventListener("click",function(){i(s,"header:menu:close")});var l=b(),d=g(),c=f(),u=E({variant:"mobile"}),p=E({variant:"desktop"}),h=x(),m=k(),v=t("div",{class:"esri-header-client"},c),y=t("div",{class:"esri-header-lineBreak"}),w=t("div",{class:"esri-header -"+(e.theme||"web")},s,l,d,u,p,h,y,m,v);o(w),w.addEventListener("header:update",function(e){var t=e.detail;t.brand&&(t.brand.topStripe&&(i(l,"header:update:brand",t.brand),w.style.marginTop="3px"),i(d,"header:update:brand",t.brand)),t.menus&&(i(p,"header:update:menus",t.menus),i(u,"header:update:menus",t.menus)),t.collapseMenus&&(i(p,"header:update:collapseMenus",t.collapseMenus),i(u,"header:update:collapseMenus",t.collapseMenus)),t.search&&i(h,"header:update:search",t.search),t.account&&i(v.lastChild,"header:update:account",t.account),t.account&&i(v.lastChild,"header:update:account",t.account),t.apps&&i(m,"header:update:apps",t.apps),w.ownerDocument.defaultView.addEventListener("keydown",function(e){27===e.keyCode&&i(w,"header:menu:close")})}),w.addEventListener("header:apps:reorder",function(e){var t=e.detail;i(m,"header::apps:reorder",t.icons)}),w.addEventListener("header:menu:toggle",function(e){var t=e.detail,n="true"!==t.control.getAttribute("aria-expanded")?"header:menu:open":"header:menu:close";i(t.control,n,t)});var C=null,L=null,D=null,A=null,_=null;return w.addEventListener("header:menu:open",function(e){var n=e.detail,r="menu-toggle"===n.type;t(n.control,{aria:{expanded:!0}}),t(n.content,{aria:{expanded:!0,hidden:!1}}),A&&A.control!==n.control&&i(A.control,"header:menu:close",A),"menu-toggle"===n.type&&(A=n),h===n.target?L=n:L&&(i(h,"header:menu:close",L),L=null),p===n.target||u===n.target?D=n:!D||r||a.matches||(i(p,"header:menu:close",D),i(u,"header:menu:close",D),D=null),c===n.target?C=n:C&&(i(c,"header:menu:close",C),C=null),m===n.target?_=n:_&&(i(m,"header:menu:close",_),_=null),t(s,{data:{open:!0,state:n.state}}),t(w.ownerDocument.documentElement,{data:{"header-is-open":!0}})}),w.addEventListener("header:menu:close",function(e){var n=e.detail||D||L||C||_||A;if(n){t(n.control,{aria:{expanded:!1}}),t(n.content,{aria:{expanded:!1,hidden:!0}});var a=!r.matches||"menu-close"!==n.type&&"account-close"!==n.type;L&&L.control===n.control&&i(L.content.lastChild,"reset"),a&&(t(s,{data:{open:!1}}),w.ownerDocument.documentElement.removeAttribute("data-header-is-open"))}}),w.addEventListener("DOMNodeInserted",function o(){function s(){var e=h.documentElement.clientWidth,t=h.documentElement.clientHeight,a=h.documentElement.scrollHeight;g=getComputedStyle(h.documentElement).overflowY.replace("visible",a>t?"scroll":"visible"),n(m,":root{--esri-vw:"+e+"px;--esri-vh:"+t+"px}[data-header-is-open]{width:"+e+"px;height:"+t+"px;overflow-y:"+g+"}"),(r=f.matchMedia("(max-width: 1023px)")).matches?(p.querySelector(".esri-header-menus-content").classList.add("hidden"),u.querySelector(".esri-header-menus-content").classList.remove("hidden")):(p.querySelector(".esri-header-menus-content").classList.remove("hidden"),u.querySelector(".esri-header-menus-content").classList.add("hidden"))}function l(){a.matches?(i(w,"header:breakpoint:s"),u.lastChild.appendChild(c),p.lastChild.appendChild(c)):(i(w,"header:breakpoint:not:s"),v.appendChild(c))}function d(){r.matches?(i(w,"header:breakpoint:sm"),t(p.lastChild,{aria:{hidden:"false"===p.lastChild.getAttribute("aria-expanded")}})):(i(w,"header:breakpoint:not:sm"),t(p.lastChild,{aria:{hidden:!1}}))}var h=w.ownerDocument,f=h.defaultView,m=t("style"),g=void 0;w.parentNode&&(w.removeEventListener("DOMNodeInserted",o),i(w,"header:update",e),t(h.head,m),f.addEventListener("orientationchange",s),f.addEventListener("resize",s),a=f.matchMedia("(max-width: 767px)"),r=f.matchMedia("(max-width: 1023px)"),a.addListener(l),r.addListener(d),l(),d(),s())}),w},T=function(e,n){return t("div",{class:n+"-brand"},t("a",{class:n+"-brand-link",href:e.href,aria:{label:e.label}},l({imgDef:e.path,imgClass:n+"-brand-image"})))},S=function(e){var n=t.apply(void 0,["select",{class:e.prefix+"-choice",autofocus:"",aria:{label:e.optionsLabel}}].concat(p(e.options.map(function(e){var t=document.createElement("option");return t.value=e.value,t.innerHTML=e.label,t})))),a=t("form",{class:e.prefix,aria:{labelledby:e.prefix+"-message",describedby:"dialog-description"}},t("p",{class:e.prefix+"-message",id:e.prefix+"-message"},t("strong",e.greetingLabel)," ",e.messageLabel),n,t("button",{class:e.prefix+"-submit",type:"submit",aria:{label:e.submitLabel+" "+e.optionsLabel}},e.submitLabel));return a.addEventListener("submit",function(e){e.preventDefault(),window.location.href=n.value}),a},N=function(e,n){function a(e){e.preventDefault(),t(c,{aria:{expanded:!1}})}document.createTextNode(e.buttonLabel);var r=document.createElement("button");r.classList.add(n+"-language-control"),r.setAttribute("ariaDescribedby",n+"-language"),r.innerHTML=e.buttonLabel;var o=t("div",{class:n+"-language"},r);r.addEventListener("click",function(e){e.preventDefault(),t(c,{aria:{expanded:!0}})}),e.prefix=n+"-language-dialog";var s=S(e),l=t("button",{class:n+"-language-dialog-close",id:"dialog-description",ariaLabel:e.closeLabel});l.addEventListener("click",a),t(s,l);var d=t("button",{class:n+"-language-dialog-cancel-canvas",type:"button",tabindex:-1});d.addEventListener("click",a);var c=t("div",{class:n+"-language-dialog-barrier",aria:{expanded:!1}},s,d);return r.addEventListener("click",function(){i(r,"footer:click:language",e)}),o.addEventListener("footer:update:language",function(e){var t=e.detail;r.innerHTML=t.buttonLabel,o.ownerDocument.body.appendChild(c),o.ownerDocument.defaultView.addEventListener("keydown",function(){27===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:event).keyCode&&a(event)})}),o},M=function(e,n){function a(){c!==d.matches&&(c=d.matches,u.forEach(function(e){c?r(e.firstChild):o(e.firstChild)}))}function r(e){var n="true"!==e.nextElementSibling.getAttribute("aria-hidden");t(e,{tabindex:0,role:"button",aria:{expanded:!n,haspopup:!n}}),e.addEventListener("click",s),e.addEventListener("keypress",l),t(e.nextElementSibling,{aria:{hidden:!0}})}function o(e){e.removeAttribute("aria-controls"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-haspopup"),e.removeAttribute("role"),e.removeAttribute("tabindex"),e.addEventListener("click",s),e.addEventListener("keypress",l),e.nextElementSibling.removeAttribute("aria-hidden")}function s(e){var n=e.currentTarget,a=n.nextElementSibling,r="true"!==a.getAttribute("aria-hidden");t(n,{aria:{expanded:!r,haspopup:!r}}),t(a,{aria:{hidden:r}}),r?t(n,{aria:{controls:0}}):t(n,{aria:{controls:a.id}})}function l(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),i(e.currentTarget,"click"))}var d=matchMedia("(max-width: 719px)"),c=!1;d.addListener(a);var u=e.menu.map(function(e,a){return t("li",{class:n+"-menu-item",id:n+"-menu-link--"+a},t("span",{class:n+"-menu-link",role:"heading"},e.label),t("div",{class:n+"-menu--sub",id:n+"-menu--sub--"+a,aria:{labelledby:n+"-menu-link--"+a}},t.apply(void 0,["ul",{class:n+"-menu-list--sub",role:"presentation"}].concat(p(e.menu.map(function(e){return t("li",{class:n+"-menu-item--sub"},t("a",{class:n+"-menu-link--sub",href:e.href},e.label))}))))))}),h=t("div",{class:n+"-menu",aria:{label:e.label}},t.apply(void 0,["ul",{class:n+"-menu-list",role:"presentation"}].concat(p(u))));return a(),h},I=function(e,n){return t("div",{class:n+"-info",aria:{label:e.label}},t.apply(void 0,["ul",{class:n+"-info-list",role:"presentation"}].concat(p(e.menu.map(function(e,a){return t("li",{class:n+"-info-item",id:n+"-info-link--"+a},t("a",{class:n+"-info-link",href:e.href},e.label))})))))},O=function(e,n){var a=document.createDocumentFragment();return e.menu.forEach(function(e){t(a,t("li",{class:n+"-social-item"},t("a",{class:n+"-social-link -"+e.label.toLowerCase().replace(" ","-"),href:e.href,aria:{label:e.label},target:"_blank"},l({imgDef:e.image.path,imgClass:n+"-social-image",imgWidth:30,imgHeight:30,viewBox:e.image.viewBox}))))}),t("div",{class:n+"-social",aria:{label:e.label}},t("ul",{class:n+"-social-list",role:"presentation"},a))},W=function(e){var n=e.prefix||"esri-footer",a=T(e.brand,n),r=I(e.info,n),s=e.language?N(e.language,n):t("div",{class:"esri-footer-language"}),l=M(e.menu,n),d=O(e.social,n),c=t("footer",{class:n+" "+(e.hideMenus?"skinny-footer":""),role:"navigation",aria:{label:e.label}},t("div",{class:n+"-section--1 "+(e.hideMenus?"hidden":"")},a,d),t("div",{class:n+"-section--2 "+(e.hideMenus?"hidden":"")},l),t("div",{class:n+"-section--3"},s,r));return c.addEventListener("DOMNodeInserted",function t(){c.removeEventListener("DOMNodeInserted",t),c.addEventListener("focusin",function(){var e=c.ownerDocument.documentElement.scrollHeight-c.scrollHeight;e>c.ownerDocument.defaultView.pageYOffset&&c.ownerDocument.defaultView.scrollTo(0,e)}),e.hideMenus&&document.querySelector(".esri-footer-barrier").classList.add("skinny-footer"),i(c,"footer:update",e)}),o(c),c.addEventListener("footer:update",function(e){function n(){var e=0>window.pageYOffset;t(c,{data:{hidden:e}})}var o=e.detail;o.brand&&i(a,"footer:update:brand",o.brand),o.info&&i(r,"footer:update:info",o.info),o.language&&i(s,"footer:update:language",o.language),o.menu&&i(l,"footer:update:menu",o.menu),o.social&&i(d,"footer:update:social",o.social),c.ownerDocument.defaultView.addEventListener("scroll",n),n()}),c};return window.esriHeader={create:_},window.esriFooter={create:W},{createHeader:d,createFooter:c,create:function(e){var t=e.headerElm,n=e.footerElm,a=e.menuData;d({menuData:a,targetElm:t}),c({menuData:a,targetElm:n})}}});
//# sourceMappingURL=esri-global-nav.js.map
