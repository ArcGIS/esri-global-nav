{"version":3,"file":"esri-language.js","sources":["../node_modules/domose/domose.js","dependent-js/language.js"],"sourcesContent":["/* Speculative DOM Functionality\n/* ========================================================================== */\n\nfunction __assignSource(element, source, prefix) {\n\tfor (let key in source) {\n\t\tif ('function' === typeof source[key]) {\n\t\t\t// add functions as event listeners\n\t\t\telement.addEventListener(prefix + key, source[key]);\n\t\t} else if (Object(source[key]) === source[key]) {\n\t\t\t// assign objects as source\n\t\t\t__assignSource(element, source[key], `${prefix + key}-`);\n\t\t} else {\n\t\t\t// otherwise, set attributes\n\t\t\telement.setAttribute(prefix + key, source[key]);\n\t\t}\n\t}\n}\n\n/* Assign an element with attributes, events, and children\n/* ========================================================================== */\n\nfunction $assign(id) {\n\t// $assign(element, { class: 'btn', click: () => { /* listener */ } });\n\t// $assign('button', { aria: { label: 'title' } }, child);\n\t// $assign('div', child1, child2, 'a new text node');\n\t// $assign(document.createElementNS('http://www.w3.org/2000/svg', 'svg'));\n\n\tconst element = id instanceof Node ? id : document.createElement(id);\n\n\t[].slice.call(arguments, 1).forEach((source) => {\n\t\tif (source instanceof Node) {\n\t\t\t// append sources that are nodes\n\t\t\telement.appendChild(source);\n\t\t} else if ('string' === typeof source) {\n\t\t\t// append strings as text nodes\n\t\t\telement.appendChild(\n\t\t\t\tdocument.createTextNode(source)\n\t\t\t);\n\t\t} else {\n\t\t\t__assignSource(element, source, '');\n\t\t}\n\t});\n\n\treturn element;\n}\n\n/* Dispatch an event from an Element\n/* ========================================================================== */\n\nfunction $dispatchEvent(element, event) {\n\t// $dispatchEvent(element, new CustomEvent('foo', { bubbles: true }));\n\t// $dispatchEvent(element, 'foo', { bubbles: true });\n\n\treturn element.dispatchEvent(\n\t\tevent instanceof Event ? event : $CustomEvent(event, arguments[1])\n\t);\n}\n\n/* Replace all the children of a parent node with new children\n/* ========================================================================== */\n\nfunction $replaceAll(parentNode) {\n\t// $replaceAll(element);\n\t// $replaceAll(element, child1, child2);\n\n\twhile (parentNode.lastChild) {\n\t\tparentNode.removeChild(parentNode.lastChild);\n\t}\n\n\tparentNode.appendChild(\n\t\t__asFragment(arguments)\n\t);\n\n\treturn parentNode;\n}\n\n/* Wrap a child node within an element\n/* ========================================================================== */\n\nfunction $wrapWith(childNode, element) {\n\t// $wrapWith(element, wrappingElement);\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.insertBefore(element, childNode).appendChild(childNode);\n\t}\n\n\treturn childNode;\n}\n\n/* Emerging DOM Functionality\n/* ========================================================================== */\n\nfunction __asFragment(nodes) {\n\tconst fragment = document.createDocumentFragment();\n\n\t[].slice.call(nodes, 1).forEach((node) => {\n\t\tif (node instanceof Node) {\n\t\t\tfragment.appendChild(node);\n\t\t} else {\n\t\t\tfragment.appendChild(\n\t\t\t\tdocument.createTextNode(node)\n\t\t\t);\n\t\t}\n\t});\n\n\treturn fragment;\n}\n\n/* Insert nodes after a child node\n/* ========================================================================== */\n\nfunction $after(childNode) {\n\t// $after(element, sibling1, sibling2, 'a new text node');\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.insertBefore(\n\t\t\t__asFragment(arguments),\n\t\t\tchildNode.nextSibling\n\t\t);\n\t}\n\n\treturn childNode;\n}\n\n/* Appends nodes to a parent node\n/* ========================================================================== */\n\nfunction $append(parentNode) {\n\t// $append(parentNode, child1, child2, 'a new text node');\n\n\tparentNode.append(\n\t\t__asFragment(arguments)\n\t);\n\n\treturn parentNode;\n}\n\n/* Insert nodes before an element\n/* ========================================================================== */\n\nfunction $before(element) {\n\t// $before(element, sibling1, sibling2, 'a new text node');\n\n\tif (element.parentNode) {\n\t\telement.parentNode.insertBefore(\n\t\t\t__asFragment(arguments),\n\t\t\telement\n\t\t);\n\t}\n\n\treturn element;\n}\n\n/* Return the closest ancestor element matching a given selector\n/* ========================================================================== */\n\nfunction $closest(element, selectors) {\n\t// $closest(element, selectors);\n\n\tlet target = element;\n\n\twhile (target && 1 === target.nodeType) {\n\t\tif ($matches(target, selectors)) {\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode;\n\t}\n\n\treturn null;\n}\n\n/* Return whether or not a DOM element matches a given selector\n/* ========================================================================== */\n\nfunction $matches(element, selectors) {\n\t// $matches(element, selectors);\n\n\tconst elements = element.parentNode.querySelectorAll(selectors);\n\n\tlet index = 0;\n\n\twhile (elements[index] && elements[index] !== element) {\n\t\t++index;\n\t}\n\n\treturn Boolean(elements[index]);\n}\n\n/* Prepends a child to a parent node\n/* ========================================================================== */\n\nfunction $prepend(parentNode) {\n\t// $prepend(element, child1, child2, 'a new text node');\n\n\tparentNode.insertBefore(\n\t\t__asFragment(arguments),\n\t\tparentNode.firstChild\n\t);\n\n\treturn parentNode;\n}\n\n/* Remove a child node from its parent\n/* ========================================================================== */\n\nfunction $remove(childNode) {\n\t// $remove(element);\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.removeChild(childNode);\n\t}\n\n\treturn childNode;\n}\n\n/* Replace a child node with nodes\n/* ========================================================================== */\n\nfunction $replaceWith(childNode) {\n\t// $replaceWith(element, sibling1, sibling2, 'a new text node');\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.replaceChild(\n\t\t\t__asFragment(arguments),\n\t\t\tchildNode\n\t\t);\n\t}\n\n\treturn childNode;\n}\n\n/* Emerging Event Functionality\n/* ========================================================================== */\n\n/* Create a new CustomEvent\n/* ========================================================================== */\n\nfunction $CustomEvent(type) {\n\t// element.dispatchEvent(new $CustomEvent('click', { bubbles: true }));\n\n\tconst event = document.createEvent('CustomEvent');\n\tconst param = Object(arguments[1]) || { bubbles: false, cancelable: false, detail: undefined };\n\n\tevent.initCustomEvent(type, param.bubbles, param.cancelable, param.detail);\n\n\treturn event;\n}\n\n/* Fetch response text from a URL and pass it to a callback\n/* ========================================================================== */\n\nfunction $fetch(url, callback) {\n\t// $fetch('api?foo=bar', (responseText) => {});\n\n\tconst xhr = new XMLHttpRequest();\n\n\txhr.addEventListener('readystatechange', () => {\n\t\tif (4 === xhr.readyState && 200 === xhr.status) {\n\t\t\tcallback(xhr.responseText); // eslint-disable-line callback-return\n\t\t}\n\t});\n\n\txhr.open('GET', url);\n\txhr.send();\n\n\treturn xhr;\n}\n\n/* Export\n/* ========================================================================== */\n\nexport {\n\t$assign,\n\t$after,\n\t$append,\n\t$before,\n\t$closest,\n\t$CustomEvent,\n\t$dispatchEvent,\n\t$fetch,\n\t$matches,\n\t$prepend,\n\t$remove,\n\t$replaceAll,\n\t$replaceWith,\n\t$wrapWith\n};\n","import { $assign as $ } from 'esri-global-shared';\n\n/* Language\n/* ========================================================================== */\n\nexport default (data) => {\n\tconst $choice = $('select',\n\t\t{\n\t\t\tclass: `${data.prefix}-choice`,\n\t\t\tautofocus: '',\n\t\t\taria: { label: data.optionsLabel }\n\t\t},\n\t\t...data.options.map(\n\t\t\t(option) => $('option', { value: option.value }, option.label)\n\t\t)\n\t);\n\n\tconst $language = $('form', {\n\t\tclass: data.prefix,\n\t\taria: { labelledby: `${data.prefix}-message`, describedby: 'dialog-description' }\n\t},\n\t\t$('p', { class: `${data.prefix}-message`, id: `${data.prefix}-message` },\n\t\t\t$('strong', data.greetingLabel),\n\t\t\t' ',\n\t\t\tdata.messageLabel\n\t\t),\n\t\t$choice,\n\t\t$('button', {\n\t\t\tclass: `${data.prefix}-submit`,\n\t\t\ttype: 'submit',\n\t\t\taria: { label: `${ data.submitLabel } ${ data.optionsLabel }` }\n\t\t}, data.submitLabel)\n\t);\n\n\t$language.addEventListener('submit', (event) => {\n\t\tevent.preventDefault();\n\n\t\twindow.location.href = $choice.value;\n\t});\n\n\treturn $language;\n};\n"],"names":["__assignSource","element","source","prefix","key","addEventListener","Object","setAttribute","$assign","id","Node","document","createElement","slice","call","arguments","forEach","appendChild","createTextNode","data","$choice","$","label","optionsLabel","options","map","option","value","$language","labelledby","describedby","class","greetingLabel","messageLabel","submitLabel","event","preventDefault","location","href"],"mappings":"yCAGA,SAASA,EAAeC,EAASC,EAAQC,OACnC,IAAIC,KAAOF,EACX,mBAAsBA,EAAOE,KAExBC,iBAAiBF,EAASC,EAAKF,EAAOE,IACpCE,OAAOJ,EAAOE,MAAUF,EAAOE,KAE1BH,EAASC,EAAOE,GAASD,EAASC,SAGzCG,aAAaJ,EAASC,EAAKF,EAAOE,IAQ7C,SAASI,EAAQC,OAMVR,EAAUQ,aAAcC,KAAOD,EAAKE,SAASC,cAAcH,YAE9DI,MAAMC,KAAKC,UAAW,GAAGC,QAAQ,SAACd,GAChCA,aAAkBQ,OAEbO,YAAYf,GACV,iBAAoBA,IAEtBe,YACPN,SAASO,eAAehB,MAGVD,EAASC,EAAQ,MAI3BD,+ICtCQkB,OACTC,EAAUC,gBAAE,gBAENF,EAAKhB,2BACJ,SACHmB,MAAOH,EAAKI,yBAElBJ,EAAKK,QAAQC,IACf,SAACC,UAAWL,EAAE,UAAYM,MAAOD,EAAOC,OAASD,EAAOJ,YAIpDM,EAAYP,EAAE,cACZF,EAAKhB,aACJ0B,WAAeV,EAAKhB,kBAAkB2B,YAAa,uBAE3DT,EAAE,KAAOU,MAAUZ,EAAKhB,kBAAkBM,GAAOU,EAAKhB,mBACrDkB,EAAE,SAAUF,EAAKa,eACjB,IACAb,EAAKc,cAENb,EACAC,EAAE,gBACSF,EAAKhB,sBACT,eACEmB,MAAWH,EAAKe,gBAAiBf,EAAKI,eAC5CJ,EAAKe,uBAGC7B,iBAAiB,SAAU,SAAC8B,KAC/BC,wBAECC,SAASC,KAAOlB,EAAQO,QAGzBC","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb25hdGhhbm5lYWwvR2l0SHViL0VzcmkvZ2xvYmFsLW5hdi9ub2RlX21vZHVsZXMvZG9tb3NlL2RvbW9zZS5qcyIsIi9Vc2Vycy9qb25hdGhhbm5lYWwvR2l0SHViL0VzcmkvZ2xvYmFsLW5hdi9sYW5ndWFnZS9kZXBlbmRlbnQtanMvbGFuZ3VhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogU3BlY3VsYXRpdmUgRE9NIEZ1bmN0aW9uYWxpdHlcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uIF9fYXNzaWduU291cmNlKGVsZW1lbnQsIHNvdXJjZSwgcHJlZml4KSB7XG5cdGZvciAobGV0IGtleSBpbiBzb3VyY2UpIHtcblx0XHRpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHNvdXJjZVtrZXldKSB7XG5cdFx0XHQvLyBhZGQgZnVuY3Rpb25zIGFzIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHByZWZpeCArIGtleSwgc291cmNlW2tleV0pO1xuXHRcdH0gZWxzZSBpZiAoT2JqZWN0KHNvdXJjZVtrZXldKSA9PT0gc291cmNlW2tleV0pIHtcblx0XHRcdC8vIGFzc2lnbiBvYmplY3RzIGFzIHNvdXJjZVxuXHRcdFx0X19hc3NpZ25Tb3VyY2UoZWxlbWVudCwgc291cmNlW2tleV0sIGAke3ByZWZpeCArIGtleX0tYCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIG90aGVyd2lzZSwgc2V0IGF0dHJpYnV0ZXNcblx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKHByZWZpeCArIGtleSwgc291cmNlW2tleV0pO1xuXHRcdH1cblx0fVxufVxuXG4vKiBBc3NpZ24gYW4gZWxlbWVudCB3aXRoIGF0dHJpYnV0ZXMsIGV2ZW50cywgYW5kIGNoaWxkcmVuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkYXNzaWduKGlkKSB7XG5cdC8vICRhc3NpZ24oZWxlbWVudCwgeyBjbGFzczogJ2J0bicsIGNsaWNrOiAoKSA9PiB7IC8qIGxpc3RlbmVyICovIH0gfSk7XG5cdC8vICRhc3NpZ24oJ2J1dHRvbicsIHsgYXJpYTogeyBsYWJlbDogJ3RpdGxlJyB9IH0sIGNoaWxkKTtcblx0Ly8gJGFzc2lnbignZGl2JywgY2hpbGQxLCBjaGlsZDIsICdhIG5ldyB0ZXh0IG5vZGUnKTtcblx0Ly8gJGFzc2lnbihkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpKTtcblxuXHRjb25zdCBlbGVtZW50ID0gaWQgaW5zdGFuY2VvZiBOb2RlID8gaWQgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGlkKTtcblxuXHRbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkuZm9yRWFjaCgoc291cmNlKSA9PiB7XG5cdFx0aWYgKHNvdXJjZSBpbnN0YW5jZW9mIE5vZGUpIHtcblx0XHRcdC8vIGFwcGVuZCBzb3VyY2VzIHRoYXQgYXJlIG5vZGVzXG5cdFx0XHRlbGVtZW50LmFwcGVuZENoaWxkKHNvdXJjZSk7XG5cdFx0fSBlbHNlIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHNvdXJjZSkge1xuXHRcdFx0Ly8gYXBwZW5kIHN0cmluZ3MgYXMgdGV4dCBub2Rlc1xuXHRcdFx0ZWxlbWVudC5hcHBlbmRDaGlsZChcblx0XHRcdFx0ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc291cmNlKVxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0X19hc3NpZ25Tb3VyY2UoZWxlbWVudCwgc291cmNlLCAnJyk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gZWxlbWVudDtcbn1cblxuLyogRGlzcGF0Y2ggYW4gZXZlbnQgZnJvbSBhbiBFbGVtZW50XG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkZGlzcGF0Y2hFdmVudChlbGVtZW50LCBldmVudCkge1xuXHQvLyAkZGlzcGF0Y2hFdmVudChlbGVtZW50LCBuZXcgQ3VzdG9tRXZlbnQoJ2ZvbycsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG5cdC8vICRkaXNwYXRjaEV2ZW50KGVsZW1lbnQsICdmb28nLCB7IGJ1YmJsZXM6IHRydWUgfSk7XG5cblx0cmV0dXJuIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChcblx0XHRldmVudCBpbnN0YW5jZW9mIEV2ZW50ID8gZXZlbnQgOiAkQ3VzdG9tRXZlbnQoZXZlbnQsIGFyZ3VtZW50c1sxXSlcblx0KTtcbn1cblxuLyogUmVwbGFjZSBhbGwgdGhlIGNoaWxkcmVuIG9mIGEgcGFyZW50IG5vZGUgd2l0aCBuZXcgY2hpbGRyZW5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRyZXBsYWNlQWxsKHBhcmVudE5vZGUpIHtcblx0Ly8gJHJlcGxhY2VBbGwoZWxlbWVudCk7XG5cdC8vICRyZXBsYWNlQWxsKGVsZW1lbnQsIGNoaWxkMSwgY2hpbGQyKTtcblxuXHR3aGlsZSAocGFyZW50Tm9kZS5sYXN0Q2hpbGQpIHtcblx0XHRwYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBhcmVudE5vZGUubGFzdENoaWxkKTtcblx0fVxuXG5cdHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoXG5cdFx0X19hc0ZyYWdtZW50KGFyZ3VtZW50cylcblx0KTtcblxuXHRyZXR1cm4gcGFyZW50Tm9kZTtcbn1cblxuLyogV3JhcCBhIGNoaWxkIG5vZGUgd2l0aGluIGFuIGVsZW1lbnRcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICR3cmFwV2l0aChjaGlsZE5vZGUsIGVsZW1lbnQpIHtcblx0Ly8gJHdyYXBXaXRoKGVsZW1lbnQsIHdyYXBwaW5nRWxlbWVudCk7XG5cblx0aWYgKGNoaWxkTm9kZS5wYXJlbnROb2RlKSB7XG5cdFx0Y2hpbGROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIGNoaWxkTm9kZSkuYXBwZW5kQ2hpbGQoY2hpbGROb2RlKTtcblx0fVxuXG5cdHJldHVybiBjaGlsZE5vZGU7XG59XG5cbi8qIEVtZXJnaW5nIERPTSBGdW5jdGlvbmFsaXR5XG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiBfX2FzRnJhZ21lbnQobm9kZXMpIHtcblx0Y29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cblx0W10uc2xpY2UuY2FsbChub2RlcywgMSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuXHRcdGlmIChub2RlIGluc3RhbmNlb2YgTm9kZSkge1xuXHRcdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKFxuXHRcdFx0XHRkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShub2RlKVxuXHRcdFx0KTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBmcmFnbWVudDtcbn1cblxuLyogSW5zZXJ0IG5vZGVzIGFmdGVyIGEgY2hpbGQgbm9kZVxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJGFmdGVyKGNoaWxkTm9kZSkge1xuXHQvLyAkYWZ0ZXIoZWxlbWVudCwgc2libGluZzEsIHNpYmxpbmcyLCAnYSBuZXcgdGV4dCBub2RlJyk7XG5cblx0aWYgKGNoaWxkTm9kZS5wYXJlbnROb2RlKSB7XG5cdFx0Y2hpbGROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFxuXHRcdFx0X19hc0ZyYWdtZW50KGFyZ3VtZW50cyksXG5cdFx0XHRjaGlsZE5vZGUubmV4dFNpYmxpbmdcblx0XHQpO1xuXHR9XG5cblx0cmV0dXJuIGNoaWxkTm9kZTtcbn1cblxuLyogQXBwZW5kcyBub2RlcyB0byBhIHBhcmVudCBub2RlXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkYXBwZW5kKHBhcmVudE5vZGUpIHtcblx0Ly8gJGFwcGVuZChwYXJlbnROb2RlLCBjaGlsZDEsIGNoaWxkMiwgJ2EgbmV3IHRleHQgbm9kZScpO1xuXG5cdHBhcmVudE5vZGUuYXBwZW5kKFxuXHRcdF9fYXNGcmFnbWVudChhcmd1bWVudHMpXG5cdCk7XG5cblx0cmV0dXJuIHBhcmVudE5vZGU7XG59XG5cbi8qIEluc2VydCBub2RlcyBiZWZvcmUgYW4gZWxlbWVudFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJGJlZm9yZShlbGVtZW50KSB7XG5cdC8vICRiZWZvcmUoZWxlbWVudCwgc2libGluZzEsIHNpYmxpbmcyLCAnYSBuZXcgdGV4dCBub2RlJyk7XG5cblx0aWYgKGVsZW1lbnQucGFyZW50Tm9kZSkge1xuXHRcdGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoXG5cdFx0XHRfX2FzRnJhZ21lbnQoYXJndW1lbnRzKSxcblx0XHRcdGVsZW1lbnRcblx0XHQpO1xuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnQ7XG59XG5cbi8qIFJldHVybiB0aGUgY2xvc2VzdCBhbmNlc3RvciBlbGVtZW50IG1hdGNoaW5nIGEgZ2l2ZW4gc2VsZWN0b3Jcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRjbG9zZXN0KGVsZW1lbnQsIHNlbGVjdG9ycykge1xuXHQvLyAkY2xvc2VzdChlbGVtZW50LCBzZWxlY3RvcnMpO1xuXG5cdGxldCB0YXJnZXQgPSBlbGVtZW50O1xuXG5cdHdoaWxlICh0YXJnZXQgJiYgMSA9PT0gdGFyZ2V0Lm5vZGVUeXBlKSB7XG5cdFx0aWYgKCRtYXRjaGVzKHRhcmdldCwgc2VsZWN0b3JzKSkge1xuXHRcdFx0cmV0dXJuIHRhcmdldDtcblx0XHR9XG5cblx0XHR0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcblx0fVxuXG5cdHJldHVybiBudWxsO1xufVxuXG4vKiBSZXR1cm4gd2hldGhlciBvciBub3QgYSBET00gZWxlbWVudCBtYXRjaGVzIGEgZ2l2ZW4gc2VsZWN0b3Jcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRtYXRjaGVzKGVsZW1lbnQsIHNlbGVjdG9ycykge1xuXHQvLyAkbWF0Y2hlcyhlbGVtZW50LCBzZWxlY3RvcnMpO1xuXG5cdGNvbnN0IGVsZW1lbnRzID0gZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzKTtcblxuXHRsZXQgaW5kZXggPSAwO1xuXG5cdHdoaWxlIChlbGVtZW50c1tpbmRleF0gJiYgZWxlbWVudHNbaW5kZXhdICE9PSBlbGVtZW50KSB7XG5cdFx0KytpbmRleDtcblx0fVxuXG5cdHJldHVybiBCb29sZWFuKGVsZW1lbnRzW2luZGV4XSk7XG59XG5cbi8qIFByZXBlbmRzIGEgY2hpbGQgdG8gYSBwYXJlbnQgbm9kZVxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJHByZXBlbmQocGFyZW50Tm9kZSkge1xuXHQvLyAkcHJlcGVuZChlbGVtZW50LCBjaGlsZDEsIGNoaWxkMiwgJ2EgbmV3IHRleHQgbm9kZScpO1xuXG5cdHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFxuXHRcdF9fYXNGcmFnbWVudChhcmd1bWVudHMpLFxuXHRcdHBhcmVudE5vZGUuZmlyc3RDaGlsZFxuXHQpO1xuXG5cdHJldHVybiBwYXJlbnROb2RlO1xufVxuXG4vKiBSZW1vdmUgYSBjaGlsZCBub2RlIGZyb20gaXRzIHBhcmVudFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJHJlbW92ZShjaGlsZE5vZGUpIHtcblx0Ly8gJHJlbW92ZShlbGVtZW50KTtcblxuXHRpZiAoY2hpbGROb2RlLnBhcmVudE5vZGUpIHtcblx0XHRjaGlsZE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjaGlsZE5vZGUpO1xuXHR9XG5cblx0cmV0dXJuIGNoaWxkTm9kZTtcbn1cblxuLyogUmVwbGFjZSBhIGNoaWxkIG5vZGUgd2l0aCBub2Rlc1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJHJlcGxhY2VXaXRoKGNoaWxkTm9kZSkge1xuXHQvLyAkcmVwbGFjZVdpdGgoZWxlbWVudCwgc2libGluZzEsIHNpYmxpbmcyLCAnYSBuZXcgdGV4dCBub2RlJyk7XG5cblx0aWYgKGNoaWxkTm9kZS5wYXJlbnROb2RlKSB7XG5cdFx0Y2hpbGROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKFxuXHRcdFx0X19hc0ZyYWdtZW50KGFyZ3VtZW50cyksXG5cdFx0XHRjaGlsZE5vZGVcblx0XHQpO1xuXHR9XG5cblx0cmV0dXJuIGNoaWxkTm9kZTtcbn1cblxuLyogRW1lcmdpbmcgRXZlbnQgRnVuY3Rpb25hbGl0eVxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuLyogQ3JlYXRlIGEgbmV3IEN1c3RvbUV2ZW50XG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkQ3VzdG9tRXZlbnQodHlwZSkge1xuXHQvLyBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3ICRDdXN0b21FdmVudCgnY2xpY2snLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuXG5cdGNvbnN0IGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG5cdGNvbnN0IHBhcmFtID0gT2JqZWN0KGFyZ3VtZW50c1sxXSkgfHwgeyBidWJibGVzOiBmYWxzZSwgY2FuY2VsYWJsZTogZmFsc2UsIGRldGFpbDogdW5kZWZpbmVkIH07XG5cblx0ZXZlbnQuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtLmJ1YmJsZXMsIHBhcmFtLmNhbmNlbGFibGUsIHBhcmFtLmRldGFpbCk7XG5cblx0cmV0dXJuIGV2ZW50O1xufVxuXG4vKiBGZXRjaCByZXNwb25zZSB0ZXh0IGZyb20gYSBVUkwgYW5kIHBhc3MgaXQgdG8gYSBjYWxsYmFja1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJGZldGNoKHVybCwgY2FsbGJhY2spIHtcblx0Ly8gJGZldGNoKCdhcGk/Zm9vPWJhcicsIChyZXNwb25zZVRleHQpID0+IHt9KTtcblxuXHRjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuXHR4aHIuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsICgpID0+IHtcblx0XHRpZiAoNCA9PT0geGhyLnJlYWR5U3RhdGUgJiYgMjAwID09PSB4aHIuc3RhdHVzKSB7XG5cdFx0XHRjYWxsYmFjayh4aHIucmVzcG9uc2VUZXh0KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjYWxsYmFjay1yZXR1cm5cblx0XHR9XG5cdH0pO1xuXG5cdHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuXHR4aHIuc2VuZCgpO1xuXG5cdHJldHVybiB4aHI7XG59XG5cbi8qIEV4cG9ydFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZXhwb3J0IHtcblx0JGFzc2lnbixcblx0JGFmdGVyLFxuXHQkYXBwZW5kLFxuXHQkYmVmb3JlLFxuXHQkY2xvc2VzdCxcblx0JEN1c3RvbUV2ZW50LFxuXHQkZGlzcGF0Y2hFdmVudCxcblx0JGZldGNoLFxuXHQkbWF0Y2hlcyxcblx0JHByZXBlbmQsXG5cdCRyZW1vdmUsXG5cdCRyZXBsYWNlQWxsLFxuXHQkcmVwbGFjZVdpdGgsXG5cdCR3cmFwV2l0aFxufTtcbiIsImltcG9ydCB7ICRhc3NpZ24gYXMgJCB9IGZyb20gJ2VzcmktZ2xvYmFsLXNoYXJlZCc7XG5cbi8qIExhbmd1YWdlXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5leHBvcnQgZGVmYXVsdCAoZGF0YSkgPT4ge1xuXHRjb25zdCAkY2hvaWNlID0gJCgnc2VsZWN0Jyxcblx0XHR7XG5cdFx0XHRjbGFzczogYCR7ZGF0YS5wcmVmaXh9LWNob2ljZWAsXG5cdFx0XHRhdXRvZm9jdXM6ICcnLFxuXHRcdFx0YXJpYTogeyBsYWJlbDogZGF0YS5vcHRpb25zTGFiZWwgfVxuXHRcdH0sXG5cdFx0Li4uZGF0YS5vcHRpb25zLm1hcChcblx0XHRcdChvcHRpb24pID0+ICQoJ29wdGlvbicsIHsgdmFsdWU6IG9wdGlvbi52YWx1ZSB9LCBvcHRpb24ubGFiZWwpXG5cdFx0KVxuXHQpO1xuXG5cdGNvbnN0ICRsYW5ndWFnZSA9ICQoJ2Zvcm0nLCB7XG5cdFx0Y2xhc3M6IGRhdGEucHJlZml4LFxuXHRcdGFyaWE6IHsgbGFiZWxsZWRieTogYCR7ZGF0YS5wcmVmaXh9LW1lc3NhZ2VgLCBkZXNjcmliZWRieTogJ2RpYWxvZy1kZXNjcmlwdGlvbicgfVxuXHR9LFxuXHRcdCQoJ3AnLCB7IGNsYXNzOiBgJHtkYXRhLnByZWZpeH0tbWVzc2FnZWAsIGlkOiBgJHtkYXRhLnByZWZpeH0tbWVzc2FnZWAgfSxcblx0XHRcdCQoJ3N0cm9uZycsIGRhdGEuZ3JlZXRpbmdMYWJlbCksXG5cdFx0XHQnICcsXG5cdFx0XHRkYXRhLm1lc3NhZ2VMYWJlbFxuXHRcdCksXG5cdFx0JGNob2ljZSxcblx0XHQkKCdidXR0b24nLCB7XG5cdFx0XHRjbGFzczogYCR7ZGF0YS5wcmVmaXh9LXN1Ym1pdGAsXG5cdFx0XHR0eXBlOiAnc3VibWl0Jyxcblx0XHRcdGFyaWE6IHsgbGFiZWw6IGAkeyBkYXRhLnN1Ym1pdExhYmVsIH0gJHsgZGF0YS5vcHRpb25zTGFiZWwgfWAgfVxuXHRcdH0sIGRhdGEuc3VibWl0TGFiZWwpXG5cdCk7XG5cblx0JGxhbmd1YWdlLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICRjaG9pY2UudmFsdWU7XG5cdH0pO1xuXG5cdHJldHVybiAkbGFuZ3VhZ2U7XG59O1xuIl0sIm5hbWVzIjpbIl9fYXNzaWduU291cmNlIiwiZWxlbWVudCIsInNvdXJjZSIsInByZWZpeCIsImtleSIsImFkZEV2ZW50TGlzdGVuZXIiLCJPYmplY3QiLCJzZXRBdHRyaWJ1dGUiLCIkYXNzaWduIiwiaWQiLCJOb2RlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJkYXRhIiwiJGNob2ljZSIsIiQiLCJsYWJlbCIsIm9wdGlvbnNMYWJlbCIsIm9wdGlvbnMiLCJtYXAiLCJvcHRpb24iLCJ2YWx1ZSIsIiRsYW5ndWFnZSIsImxhYmVsbGVkYnkiLCJkZXNjcmliZWRieSIsImNsYXNzIiwiZ3JlZXRpbmdMYWJlbCIsIm1lc3NhZ2VMYWJlbCIsInN1Ym1pdExhYmVsIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImxvY2F0aW9uIiwiaHJlZiJdLCJtYXBwaW5ncyI6InlDQUdBLFNBQVNBLEVBQWVDLEVBQVNDLEVBQVFDLE9BQ25DLElBQUlDLEtBQU9GLEVBQ1gsbUJBQXNCQSxFQUFPRSxLQUV4QkMsaUJBQWlCRixFQUFTQyxFQUFLRixFQUFPRSxJQUNwQ0UsT0FBT0osRUFBT0UsTUFBVUYsRUFBT0UsS0FFMUJILEVBQVNDLEVBQU9FLEdBQVNELEVBQVNDLFNBR3pDRyxhQUFhSixFQUFTQyxFQUFLRixFQUFPRSxJQVE3QyxTQUFTSSxFQUFRQyxPQU1WUixFQUFVUSxhQUFjQyxLQUFPRCxFQUFLRSxTQUFTQyxjQUFjSCxZQUU5REksTUFBTUMsS0FBS0MsVUFBVyxHQUFHQyxRQUFRLFNBQUNkLEdBQ2hDQSxhQUFrQlEsT0FFYk8sWUFBWWYsR0FDVixpQkFBb0JBLElBRXRCZSxZQUNQTixTQUFTTyxlQUFlaEIsTUFHVkQsRUFBU0MsRUFBUSxNQUkzQkQsK0lDdENRa0IsT0FDVEMsRUFBVUMsZ0JBQUUsZ0JBRU5GLEVBQUtoQiwyQkFDSixTQUNIbUIsTUFBT0gsRUFBS0kseUJBRWxCSixFQUFLSyxRQUFRQyxJQUNmLFNBQUNDLFVBQVdMLEVBQUUsVUFBWU0sTUFBT0QsRUFBT0MsT0FBU0QsRUFBT0osWUFJcERNLEVBQVlQLEVBQUUsY0FDWkYsRUFBS2hCLGFBQ0owQixXQUFlVixFQUFLaEIsa0JBQWtCMkIsWUFBYSx1QkFFM0RULEVBQUUsS0FBT1UsTUFBVVosRUFBS2hCLGtCQUFrQk0sR0FBT1UsRUFBS2hCLG1CQUNyRGtCLEVBQUUsU0FBVUYsRUFBS2EsZUFDakIsSUFDQWIsRUFBS2MsY0FFTmIsRUFDQUMsRUFBRSxnQkFDU0YsRUFBS2hCLHNCQUNULGVBQ0VtQixNQUFXSCxFQUFLZSxnQkFBaUJmLEVBQUtJLGVBQzVDSixFQUFLZSx1QkFHQzdCLGlCQUFpQixTQUFVLFNBQUM4QixLQUMvQkMsd0JBRUNDLFNBQVNDLEtBQU9sQixFQUFRTyxRQUd6QkMifQ=="}